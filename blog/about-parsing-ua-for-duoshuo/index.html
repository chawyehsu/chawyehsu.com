<!DOCTYPE html><html data-saber-ssr lang="zh-cn" data-saber-head="%7B%22lang%22:%7B%22ssr%22:%22zh-cn%22%7D%7D"><head><meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="ie=edge" /><meta data-saber-head="ssr" name="generator" content="Saber v0.11.7"><meta data-saber-head="ssr" name="apple-mobile-web-app-capable" content="yes"><meta data-saber-head="ssr" name="apple-mobile-web-app-status-bar-style" content="default"><meta data-saber-head="ssr" name="mobile-web-app-capable" content="yes"><meta data-saber-head="ssr" name="author" content="Chawye Hsu"><meta data-saber-head="ssr" property="og:type" content="website"><meta data-saber-head="ssr" name="twitter:card" content="summary"><meta data-saber-head="ssr" name="twitter:creator" content="Chawye Hsu"><meta data-saber-head="ssr" name="description" content="Personal Website of Chawye Hsu" data-hid="description"><meta data-saber-head="ssr" name="keywords" content="blog,blogger,个人博客,中文独立博客"><meta data-saber-head="ssr" property="og:title" content="关于多说评论显示UserAgent - The Art of Chawye Hsu"><meta data-saber-head="ssr" property="og:description" content="Personal Website of Chawye Hsu"><meta data-saber-head="ssr" name="twitter:title" content="关于多说评论显示UserAgent - The Art of Chawye Hsu"><meta data-saber-head="ssr" name="twitter:description" content="Personal Website of Chawye Hsu"> <title>关于多说评论显示UserAgent - The Art of Chawye Hsu</title> <link data-saber-head="ssr" rel="alternate" title="The Art of Chawye Hsu - Feed" href="https://chawyehsu.com/feed/atom.xml" type="application/atom+xml"><link data-saber-head="ssr" href="https://cdn.jsdelivr.net/" rel="preconnect" crossorigin="true"><style data-vue-ssr-id="6f8a3a7e:0 4c40a06b:0 4c40a06b:1 4c40a06b:2 4c40a06b:3 4c40a06b:4 4c40a06b:5 4c40a06b:6 4c40a06b:7 4c40a06b:8 4c40a06b:9 4c40a06b:10 4c40a06b:11 4c40a06b:12 cae3151e:0 2bff1d4a:0 b54aa9e0:0">.blendIn_MaOJT[data-src],.blendIn_MaOJT[data-srcset]{transition:filter .3s;filter:blur(5px)}.blendIn_MaOJT[data-lazy-loaded]{filter:none}
/*! modern-normalize v1.1.0 | MIT License | https://github.com/sindresorhus/modern-normalize */*,:after,:before{box-sizing:border-box}html{line-height:1.15;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4}body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji}hr{height:0;color:inherit}abbr[title]{text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}::-moz-focus-inner{border-style:none;padding:0}:-moz-focusring{outline:1px dotted ButtonText}:-moz-ui-invalid{box-shadow:none}legend{padding:0}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}
:root{--font-family:pt-sans,system-ui,source-han-sans-cjk-sc,-apple-system,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji";--font-family-mono:ui-monospace,SFMono-Regular,Consolas,"Liberation Mono",Menlo,monospace;--font-family-quotemark:"Times New Roman",Times,serif;--container-max-width:1600px;--gap-s:0.4445rem;--gap-m:0.8889rem;--gap-l:1.7778rem;--gap-xl:3.5556rem;--font-size-1:2rem;--font-size-2:1.5rem;--font-size-3:1.25rem;--font-size-4:1.125rem;--font-size-5:1rem;--font-size-6:0.875rem;--font-size-7:0.75rem;--font-size-code:var(--font-size-6);--font-size-footnotes:var(--font-size-7);--font-size-small:var(--font-size-7);--font-size-sub-sup:var(--font-size-7);--line-height-base:1.7778;--line-height-code:1.4;--line-height-small:1.3;--line-height-headline:1.2;--color-accent-0:#fafbfc;--color-accent-1:#f6f8fa;--color-accent-2:#e1e4e8;--color-accent-3:#d1d5da;--color-accent-4:#959da5;--color-accent-5:#6a737d;--color-accent-6:#586069;--color-accent-7:#444d56;--color-accent-8:#2f363d;--color-accent-9:#24292e;--color-background-transparent:hsla(0,0%,100%,0);--color-background:var(--color-accent-0);--color-text-primary:var(--color-accent-8);--color-text-secondary:var(--color-accent-5);--color-text-tertiary:var(--color-accent-4);--color-scrollbar:var(--color-accent-2);--color-scrollbar-hover:var(--color-accent-4);--color-link:var(--color-accent-9)}
/*! minireset.css v0.0.6 | MIT License | github.com/jgthms/minireset.css */blockquote,body,dd,dl,dt,fieldset,figure,h1,h2,h3,h4,h5,h6,hr,html,iframe,legend,li,ol,p,pre,textarea,ul{margin:0;padding:0}ul{list-style:none}button,input,select,textarea{margin:0}img,video{height:auto;max-width:100%}iframe{border:0}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}html{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;box-sizing:border-box;color:var(--color-text-primary);font-size:100%;line-height:var(--line-height-base);font-feature-settings:"liga" 1,"pnum" 1,"kern" 1;text-rendering:optimizeLegibility;text-size-adjust:100%}body{background:var(--color-background);font-family:var(--font-family)}::-webkit-scrollbar{width:6px}::-webkit-scrollbar:horizontal{height:6px}::-webkit-scrollbar-track{background:var(--color-background);border-radius:10px}::-webkit-scrollbar-thumb{background:var(--color-scrollbar);border-radius:10px}::-webkit-scrollbar-thumb:hover{background:var(--color-scrollbar-hover)}blockquote,dd,dl,dt,fieldset,figure,h1,h2,h3,h4,h5,h6,hr,iframe,legend,ol,p,pre,table,textarea,ul{margin-bottom:var(--gap-m)}a{color:inherit;text-decoration:none}a:focus,a:hover{color:var(--color-link);outline:none}a:not(.no-underlines):focus,a:not(.no-underlines):hover{background-image:linear-gradient(var(--color-text-primary),var(--color-text-primary));background-size:100% 1px;background-repeat:repeat-x;background-position:bottom;text-shadow:.03em 0 var(--color-background),-.03em 0 var(--color-background),0 .03em var(--color-background),0 -.03em var(--color-background),.06em 0 var(--color-background),-.06em 0 var(--color-background),.09em 0 var(--color-background),-.09em 0 var(--color-background),.12em 0 var(--color-background),-.12em 0 var(--color-background),.15em 0 var(--color-background),-.15em 0 var(--color-background)}a:active,a:visited{color:inherit}h1,h2,h3,h4,h5,h6{font-weight:700;line-height:var(--line-height-headline)}h1{font-size:var(--font-size-1)}h2{font-size:var(--font-size-2)}h3{font-size:var(--font-size-3)}h4{font-size:var(--font-size-4)}h5{font-size:var(--font-size-5)}h6{color:var(--color-text-secondary);font-size:var(--font-size-6)}
.embed-wrapper{position:relative;margin-bottom:var(--gap-m)}.embed-wrapper:before{content:"";display:block;padding-bottom:50%}.embed-wrapper iframe{position:absolute;width:100%;height:100%;top:0;border:0}.embed-wrapper.embed-aspect-4-3:before{padding-bottom:75%}.embed-wrapper.embed-aspect-16-9:before{padding-bottom:56.25%}
main{display:flex;min-height:100vh;flex-direction:column}main article{flex:1}.main-container{max-width:var(--container-max-width);margin-left:auto;margin-right:auto}html.navbar-active body{overflow:hidden}.flex{display:flex}.flex-col{flex-direction:column}.block{display:block}.inline-block{display:inline-block}
.page-body blockquote{margin:var(--gap-l) 0;position:relative;color:var(--color-text-secondary);padding-left:calc(var(--gap-l)*1.5);padding-right:var(--gap-l);overflow-wrap:break-word}.page-body blockquote p:last-child{margin:0}.page-body blockquote:before{position:absolute;top:calc(var(--gap-m)*-1);left:0;content:"\201c";font-family:var(--font-family-quotemark);font-size:300%;font-weight:700;line-height:1}.page-body code,.page-body pre{font-family:var(--font-family-mono);font-size:var(--font-size-code)}.page-body code{padding:0 var(--gap-s);border:1px dotted var(--color-accent-4);border-radius:2px}.page-body pre code{border:none}.page-body .saber-highlight{position:relative;overflow:hidden;margin:0 0 var(--gap-m) 0;border-radius:0}.page-body .saber-highlight code{background:transparent;padding:0}.page-body .saber-highlight pre.saber-highlight-code{margin:0;padding:var(--gap-m);overflow:auto}.page-body .saber-highlight:before{content:attr(data-lang);position:absolute;right:var(--gap-s);opacity:.2;color:var(--color-text-secondary);font-family:var(--font-family-mono);font-size:1.5rem;font-weight:700}.page-body figure{text-align:center}.page-body figure img{margin-bottom:0}.page-body figure iframe{display:block;margin:0 auto;max-width:100%}.page-body figure figcaption{margin-top:var(--gap-s);color:var(--color-text-secondary)}.page-body figure figcaption,.page-body figure figcaption code{font-size:var(--font-size-small)}.page-body hr{border:0;height:auto;margin:var(--gap-l) auto;opacity:.5;overflow:visible}.page-body hr:after{color:var(--color-text-secondary);content:"* * *";display:block;height:1rem;line-height:1;text-align:center;word-spacing:.5rem}.page-body hr.footnotes-sep:after{content:"Footnotes"}.page-body ol,.page-body ul{margin-bottom:var(--gap-m);padding-left:var(--gap-m);text-align:justify}.page-body ol li ol,.page-body ol li ul,.page-body ol p,.page-body ul li ol,.page-body ul li ul,.page-body ul p{margin-bottom:0}.page-body ul{list-style-type:square}.page-body table{border-collapse:collapse;border-spacing:0;display:block;overflow:auto;width:100%}.page-body table tr td,.page-body table tr th{border:1px solid var(--color-accent-2);padding:var(--gap-s) var(--gap-m);white-space:nowrap}.page-body table tr:nth-child(2n){background-color:var(--color-accent-1)}.page-body a:not([id^=fnref]){padding-bottom:1px;overflow-wrap:break-word;word-break:break-all;transition:border .15s ease-in-out;background-image:linear-gradient(var(--color-accent-3),var(--color-accent-3));background-size:100% 1px;background-repeat:repeat-x;background-position:bottom;text-shadow:.03em 0 var(--color-background),-.03em 0 var(--color-background),0 .03em var(--color-background),0 -.03em var(--color-background),.06em 0 var(--color-background),-.06em 0 var(--color-background),.09em 0 var(--color-background),-.09em 0 var(--color-background),.12em 0 var(--color-background),-.12em 0 var(--color-background),.15em 0 var(--color-background),-.15em 0 var(--color-background)}.page-body a:not([id^=fnref]):focus,.page-body a:not([id^=fnref]):hover{color:var(--color-link);text-decoration:none;background-image:linear-gradient(var(--color-text-primary),var(--color-text-primary))}.page-body del,.page-body s{color:var(--color-text-secondary)}.page-body img{margin-bottom:var(--gap-m);vertical-align:middle}.page-body sub,.page-body sup{font-size:var(--font-size-sub-sup)}
.page-content{width:100%}.page-content .page-header{position:relative}.page-content .page-header .page-title{margin-bottom:var(--gap-l)}.page-content .page-header .page-meta{text-align:right;font-style:italic;font-size:var(--font-size-small);color:var(--color-text-secondary);line-height:var(--line-height-small)}.page-content .page-body{margin-top:var(--gap-m)}.page-content .page-body .footnotes{color:var(--color-text-secondary);font-size:var(--font-size-footnotes)}.page-content .page-body .footnotes p{margin-bottom:var(--gap-s)}
@media screen and (min-width:321px){html{font-size:calc(14.4px + .5vw)}}@media screen and (min-width:1920px){html{font-size:24px}}@media screen and (max-width:767px){main{padding-top:var(--gap-m);padding-left:var(--gap-m);padding-right:var(--gap-m);min-height:calc(100vh - 60px - var(--gap-l)*2)}}@media screen and (min-width:768px){.main-container{display:flex}aside{width:25%}aside,main{padding-top:var(--gap-xl)}main{padding-right:var(--gap-l);width:75%}.page-content figure.left,.page-content figure.right{max-width:40%}.page-content figure.left{float:left;margin-right:var(--gap-l)}.page-content figure.right{float:right;margin-left:var(--gap-l)}}
code[class*=language-],pre[class*=language-]{color:#383a42}:not(pre)>code[class*=language-],pre[class*=language-]{background:transparent;border:1px solid var(--color-accent-3)}.token.cdata,.token.comment,.token.prolog{color:#a0a1a7}.language-css .token.string,.style .token.string,.token.entity{color:#696c77;background:#f0f0f1}.token.punctuation{color:#383a42}.token.deleted,.token.operator,.token.tag,.token.variable{color:#ca1243}.token.boolean,.token.constant,.token.number,.token.property,.token.url{color:#d75f00}.token.bold,.token.class-name{color:#c18401}.token.atrule,.token.attr-value,.token.inserted,.token.string,.token.symbol{color:#50a14f}.token.important,.token.regex{color:#0184bc}.token.attr-name,.token.function{color:#4078f2}.token.builtin,.token.char,.token.italic,.token.keyword,.token.selector{color:#a626a4}.token.doctype{color:#986801}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.namespace{opacity:.7}@media (prefers-color-scheme:dark){:root:not(.light) code[class*=language-],:root:not(.light) pre[class*=language-]{color:#abb2bf}:root:not(.light) :not(pre)>code[class*=language-],:root:not(.light) pre[class*=language-]{background:transparent}:root:not(.light) .token.cdata,:root:not(.light) .token.comment,:root:not(.light) .token.prolog{color:#545862}:root:not(.light) .language-css .token.string,:root:not(.light) .style .token.string,:root:not(.light) .token.entity{color:#565c64;background:#353b45}:root:not(.light) .token.punctuation{color:#abb2bf}:root:not(.light) .token.deleted,:root:not(.light) .token.operator,:root:not(.light) .token.tag,:root:not(.light) .token.variable{color:#e06c75}:root:not(.light) .token.boolean,:root:not(.light) .token.constant,:root:not(.light) .token.number,:root:not(.light) .token.property,:root:not(.light) .token.url{color:#d19a66}:root:not(.light) .token.bold,:root:not(.light) .token.class-name{color:#e5c07b}:root:not(.light) .token.atrule,:root:not(.light) .token.attr-value,:root:not(.light) .token.inserted,:root:not(.light) .token.string,:root:not(.light) .token.symbol{color:#98c379}:root:not(.light) .token.important,:root:not(.light) .token.regex{color:#56b6c2}:root:not(.light) .token.attr-name,:root:not(.light) .token.function{color:#61afef}:root:not(.light) .token.builtin,:root:not(.light) .token.char,:root:not(.light) .token.italic,:root:not(.light) .token.keyword,:root:not(.light) .token.selector{color:#c678dd}:root:not(.light) .token.doctype{color:#be5046}}:root.dark code[class*=language-],:root.dark pre[class*=language-]{color:#abb2bf}:root.dark :not(pre)>code[class*=language-],:root.dark pre[class*=language-]{background:transparent}:root.dark .token.cdata,:root.dark .token.comment,:root.dark .token.prolog{color:#545862}:root.dark .language-css .token.string,:root.dark .style .token.string,:root.dark .token.entity{color:#565c64;background:#353b45}:root.dark .token.punctuation{color:#abb2bf}:root.dark .token.deleted,:root.dark .token.operator,:root.dark .token.tag,:root.dark .token.variable{color:#e06c75}:root.dark .token.boolean,:root.dark .token.constant,:root.dark .token.number,:root.dark .token.property,:root.dark .token.url{color:#d19a66}:root.dark .token.bold,:root.dark .token.class-name{color:#e5c07b}:root.dark .token.atrule,:root.dark .token.attr-value,:root.dark .token.inserted,:root.dark .token.string,:root.dark .token.symbol{color:#98c379}:root.dark .token.important,:root.dark .token.regex{color:#56b6c2}:root.dark .token.attr-name,:root.dark .token.function{color:#61afef}:root.dark .token.builtin,:root.dark .token.char,:root.dark .token.italic,:root.dark .token.keyword,:root.dark .token.selector{color:#c678dd}:root.dark .token.doctype{color:#be5046}.saber-highlight-line-numbers{pointer-events:none;font-size:100%;float:left;letter-spacing:-1px;border-right:1px solid #999;user-select:none;text-align:right;padding-right:.4445rem;margin-right:.8rem}.saber-highlight-line-numbers>span{counter-increment:linenumber;display:block}.saber-highlight-line-numbers>span:before{content:counter(linenumber);color:#999;display:block}
.md-gallery{margin-bottom:var(--gap-m);display:grid;grid-gap:10px;grid-template-columns:repeat(auto-fit,minmax(260px,1fr))}.md-gallery figure{margin-bottom:0}
@media (prefers-color-scheme:dark){:root:not(.light){--color-accent-0:#22272e;--color-accent-1:#2d333b;--color-accent-2:#373e47;--color-accent-3:#444c56;--color-accent-4:#545d68;--color-accent-5:#636e7b;--color-accent-6:#768390;--color-accent-7:#909dab;--color-accent-8:#adbac7;--color-accent-9:#cdd9e5;--color-background-transparent:rgba(31,31,31,0)}}:root.dark{--color-accent-0:#22272e;--color-accent-1:#2d333b;--color-accent-2:#373e47;--color-accent-3:#444c56;--color-accent-4:#545d68;--color-accent-5:#636e7b;--color-accent-6:#768390;--color-accent-7:#909dab;--color-accent-8:#adbac7;--color-accent-9:#cdd9e5;--color-background-transparent:rgba(31,31,31,0)}
.gad{position:relative;margin:0 auto;width:100%;height:auto;margin-bottom:var(--gap-m)}.snackbar{font-family:system-ui,-apple-system,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-size:14px}
.burger[data-v-3456de1b]{z-index:999;color:currentColor;cursor:pointer;display:block;height:60px;position:relative;width:60px;margin-left:auto}.burger span[data-v-3456de1b]{background-color:currentColor;display:block;height:2px;left:calc(50% - 12px);position:absolute;transform-origin:center;transition-duration:86ms;transition-property:background-color,opacity,transform;transition-timing-function:ease-out;width:24px}.burger span[data-v-3456de1b]:first-child{top:calc(50% - 10px)}.burger span[data-v-3456de1b]:nth-child(2){top:calc(50% - 2px)}.burger span[data-v-3456de1b]:nth-child(3){top:calc(50% + 6px)}.burger.is-active span[data-v-3456de1b]:first-child{transform:translateY(8px) rotate(45deg)}.burger.is-active span[data-v-3456de1b]:nth-child(2){opacity:0}.burger.is-active span[data-v-3456de1b]:nth-child(3){transform:translateY(-8px) rotate(-45deg)}@media screen and (max-width:767px){header[data-v-3456de1b]{padding:var(--gap-l) var(--gap-m);display:flex;justify-content:space-between}.logo-image[data-v-3456de1b]{height:60px}.navbar[data-v-3456de1b]{background-color:var(--color-background);display:none;z-index:998;position:fixed;top:0;left:0;right:0;bottom:0;padding:calc(60px + var(--gap-l)) var(--gap-l) var(--gap-l);text-align:center;font-size:160%;overflow:auto}.navbar.is-active[data-v-3456de1b]{display:block}.navbar ul[data-v-3456de1b]{margin:0}.navbar ul li[data-v-3456de1b]{margin-bottom:var(--gap-m)}}@media screen and (min-width:768px){.logo-outer[data-v-3456de1b],.navbar[data-v-3456de1b]{width:60%;margin-left:auto;margin-right:auto}.logo-outer[data-v-3456de1b]{margin-bottom:var(--gap-l)}.navbar ul[data-v-3456de1b]{margin:0}.navbar ul li[data-v-3456de1b]{margin-bottom:var(--gap-s)}.burger[data-v-3456de1b]{display:none}}
.navbar-item.scheme-switcher[data-v-5a57b1b2]{background:none;cursor:pointer}
footer[data-v-58904140]{padding:3rem 0;background:var(--color-background);color:var(--color-text-primary);font-size:var(--font-size-small)}footer .section[data-v-58904140]{font-style:normal;text-align:center}@media screen and (min-width:768px){footer .section[data-v-58904140]{font-style:italic;text-align:right}}</style>  </head><body><div id="_saber" data-server-rendered="true"><div class="main-container"><aside class="sidebar" data-v-3456de1b><header data-v-3456de1b><div class="logo-outer flex" data-v-3456de1b><a href="/" title="The Art of Chawye Hsu" class="inline-block router-link-active" data-v-3456de1b><img alt="Logo" src="/_saber/images/icons/logo_512.svg" class="logo-image block" data-v-3456de1b></a></div> <div class="burger-outer" data-v-3456de1b><span class="burger" data-v-3456de1b><span data-v-3456de1b></span> <span data-v-3456de1b></span> <span data-v-3456de1b></span></span></div></header> <div class="navbar" data-v-3456de1b><nav data-v-3456de1b><ul data-v-3456de1b><li data-v-3456de1b><a href="/blog" class="router-link-active" data-v-3456de1b>文章 - Blog</a></li><li data-v-3456de1b><a href="/guestbook" data-v-3456de1b>留言板 - Guestbook</a></li><li data-v-3456de1b><a href="/links" data-v-3456de1b>链接 - Links</a></li><li data-v-3456de1b><a href="/about" data-v-3456de1b>关于 - About</a></li><li data-v-3456de1b><a href="/feed/atom.xml" data-v-3456de1b data-v-3456de1b>订阅 - Subscribe</a></li><li data-v-3456de1b><a rel="noopener noreferrer" target="_blank" href="https://www.instagram.com/chawyehsu" data-v-3456de1b data-v-3456de1b>Instagram</a></li><li data-v-3456de1b><a rel="noopener noreferrer" target="_blank" href="https://twitter.com/chawyehsu" data-v-3456de1b data-v-3456de1b>Twitter</a></li> <li data-v-3456de1b><a class="navbar-item scheme-switcher" data-v-5a57b1b2 data-v-3456de1b><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun" data-v-5a57b1b2><circle cx="12" cy="12" r="5" data-v-5a57b1b2></circle> <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" data-v-5a57b1b2></path></svg></a></li></ul></nav></div></aside> <main><article role="main" itemscope="itemscope" itemtype="https://schema.org/Article" class="page-content"><header class="page-header"><section class="page-head-content"><h1 class="page-title">关于多说评论显示UserAgent</h1> <div class="page-meta"><section class="page-author"><span>Chawye Hsu</span></section> <section class="page-datetime"><time datetime="2014-03-23T08:51:00.000Z" class="published">
                2014/03/23
              </time></section></div></section></header> <section class="page-body"><p>最近博客莫名其妙地多了十来个来自多说的访客，从统计去查看才发现有童鞋去多说讨论区发了个问题询问我博客的多说为什么会显示UserAgent，并且附上了我博客的一个链接，所以就有友友从多说跳转到我博客来围观了。</p> <p>那位询问的面条童鞋当时貌似也在微博At了我询问，后来我也回复了他，并附上了两种实现方法：其一就是可以通过使用Github上的<a rel="noopener noreferrer" target="_blank" href="https://github.com/huhuime/make_duoshuo_show_ua">make_duoshuo_show_ua</a>来实现UserAgent显示，作者huhu乃C8（chrome吧）小吧之一，常出没于C8和火狐吧。make_duoshuo_show_ua我是在逛某豆的博客看到的，我自己没用过，所以具体使用方法不清楚请自行前往Github查看=w=。其二则是我用的方法了，其实在多说的评论接口中，是附带了UA信息的，只是多说给的标准调用代码中并没有显示这部分内容。既然有接口了，自然就可以自定义输出咯。不过我并没有那么大牛自己写这么给力的duoshuo.js，我也是在逛别人博客的时候留意到有UA显示。于是就寻根，条件反射按F12键审查了代码，找到了调用的js文件，拷贝下来改了short_name就用上了。。具体在<a rel="noopener noreferrer" target="_blank" href="http://ysido.com/">阳光的博客</a>中找到调用的duoshuo.js就是了（拷贝下来可以使用 <a rel="noopener noreferrer" target="_blank" href="http://tool.lu">tool.lu</a>
盒子或者css-js工具格式化一下方便查看和修改）。但是这个duoshuo.js显示的UserAgent并不全面（比如最新的Win8.1），只是简单的支持了部分的UA，所以后来我稍微修改了判断函数，加上了 Win8.1，WinRT，WindowsPhone7/8/8.1，WinServer03/08/12，iOS7，Android 细分
2.2/2.3/4.0/4.1/4.2/4.3/4.4/，Linux细分Ubuntu/Debian/CentOS等，浏览器也细微改了一下。然后这样就能显示更多的UA了，虽然也是不能全面覆盖吧。</p> <div class="saber-highlight" data-lang="js"><pre class="saber-highlight-code language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">k</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> b <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">win</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">)</span> <span class="token operator">?</span> a<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">nt 5.0</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;Windows 2000&quot;</span> <span class="token operator">:</span> a<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">nt 5.1</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;Windows XP&quot;</span> <span class="token operator">:</span> a<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">nt 5.2</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;Windows Server 2003&quot;</span> <span class="token operator">:</span> a<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">nt 6.0</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;Windows Vista&quot;</span> <span class="token operator">:</span> a<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">nt 6.1</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">)</span> <span class="token operator">?</span> a<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">server</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;Windows Server 2008&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Windows 7&quot;</span> <span class="token operator">:</span> a<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">nt 6.2</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">)</span> <span class="token operator">?</span> a<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">server</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;Windows Server 2012&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Windows 8&quot;</span> <span class="token operator">:</span> a<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">nt 6.3</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;Windows 8.1&quot;</span> <span class="token operator">:</span> a<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">phone</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">)</span> <span class="token operator">?</span> a<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">7</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;Windows Phone 7&quot;</span> <span class="token operator">:</span> a<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">8.0</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;Windows Phone 8&quot;</span> <span class="token operator">:</span> a<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">8.1</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;Windows Phone 8.1&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Windows Phone&quot;</span> <span class="token operator">:</span> a<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">arm</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;Windows RT&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Windows&quot;</span> <span class="token operator">:</span> a<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">android</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">)</span> <span class="token operator">?</span> a<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">2.2</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;Android 2.2&quot;</span> <span class="token operator">:</span> a<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">2.3</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;Android 2.3&quot;</span> <span class="token operator">:</span> a<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">4.0</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;Android 4.0&quot;</span> <span class="token operator">:</span> a<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">4.1</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;Android 4.1&quot;</span> <span class="token operator">:</span> a<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">4.2</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;Android 4.2&quot;</span> <span class="token operator">:</span> a<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">4.3</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;Android 4.3&quot;</span> <span class="token operator">:</span> a<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">4.4</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;Android 4.4&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Android&quot;</span> <span class="token operator">:</span> a<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">linux</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">)</span> <span class="token operator">?</span> a<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">ubuntu</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;Ubuntu&quot;</span> <span class="token operator">:</span> a<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">centos</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;CentOS&quot;</span> <span class="token operator">:</span> a<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">debian</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;Debian&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Linux&quot;</span> <span class="token operator">:</span> a<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">mac</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">)</span> <span class="token operator">?</span> a<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">os 6_0</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;iOS 6&quot;</span> <span class="token operator">:</span> a<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">os 7_0</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;iOS 7&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Mac OS X&quot;</span> <span class="token operator">:</span> a<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">unix</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;Unix&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Unknown OS&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div><p><strong>以上代码不能直接使用</strong> ！至于我修改后的duoshuo.js，因为被我混淆过，即使格式化后也不能阅读和修改（虽然使用没问题），所以就不提供了。而是提供一个UserAgent收集网站：
<a rel="noopener noreferrer" target="_blank" href="http://user-agent-string.info/">http://user-agent-string.info/</a>，这个网站基本上所有的UA都有了，如果要修改
duoshuo.js判断函数的话可以参考一下这个网站里的UA字符串咯。就是这样喵~</p> <p>因为最近多说有过好几次调用不了，一片白的情况，刚好Typecho又有多说评论同步插件（阳光出品），于是酝酿已久的用回原生评论就这样执行了额（有几个评论丢失了）。多说or原生，各有利弊吧。。顺便把扒来的主题用上鸟。评论也改成了平铺了，貌似我不怎么喜欢嵌套评论= =b，加上怡红公子的At插件，原生评论也挺好的哈。</p> <p>blablabla...</p></section> <!----></article> <footer data-v-58904140><div class="container" data-v-58904140><section class="section" data-v-58904140><div class="copyright" data-v-58904140>
        © 2015-2021 Chawye Hsu. Made with <span style="font-family:sans-serif;color:#b30e2e" data-v-58904140>❤︎</span> from Guangzhou
      </div></section></div></footer></main></div></div><script src="/_saber/js/client.f01caf04.js" defer></script><script src="/_saber/js/page--_posts-2014-03-23-about-parsing-ua-for-duoshuo-md.e237eb3e.js" defer></script></body></html>
