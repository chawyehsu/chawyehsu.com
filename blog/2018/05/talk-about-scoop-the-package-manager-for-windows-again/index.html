<!DOCTYPE html><html data-saber-ssr lang="zh-CN" class="serif" data-saber-head="%7B%22lang%22:%7B%22ssr%22:%22zh-CN%22%7D,%22class%22:%7B%22ssr%22:%22serif%22%7D%7D"><head><meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="ie=edge" /><meta data-saber-head="ssr" name="generator" content="Saber v0.11.5"><meta data-saber-head="ssr" name="description" content="Personal Website of Chawye Hsu."><meta data-saber-head="ssr" name="description" content="与 Chocolatey Windows 包管理工具（Package Manager）相比， Scoop 是一款更为轻量的 Windows 包管理器。本文将对比 Chocolatey Scoop 这两款工具的区别，介绍一下 Scoop 安装使用体验，如果你没有重度的包管理需求， 不妨可以尝试一下 Scoop PowerShell Concfg 这套组合。"><meta data-saber-head="ssr" name="keywords" content="Windows 包管理器,windows package manager,Scoop Chocolatey, Scoop 安装,Windows 包管理工具,Chocolatey vs Scoop"><meta data-saber-head="ssr" property="og:title" content="再谈谈 Scoop 这个 Windows 下的软件包管理器"><meta data-saber-head="ssr" property="og:description" content="与 Chocolatey Windows 包管理工具（Package Manager）相比， Scoop 是一款更为轻量的 Windows 包管理器。本文将对比 Chocolatey Scoop 这两款工具的区别，介绍一下 Scoop 安装使用体验，如果你没有重度的包管理需求， 不妨可以尝试一下 Scoop PowerShell Concfg 这套组合。"><meta data-saber-head="ssr" property="og:image" content="https://www.h404bi.com/_saber/images/20180510001-176afb40.png"><meta data-saber-head="ssr" property="og:type" content="website"><meta data-saber-head="ssr" name="twitter:card" content="summary"><meta data-saber-head="ssr" name="twitter:creator" content="Chawye Hsu"><meta data-saber-head="ssr" name="twitter:title" content="再谈谈 Scoop 这个 Windows 下的软件包管理器"><meta data-saber-head="ssr" property="twitter:image:src" content="https://www.h404bi.com/_saber/images/20180510001-176afb40.png"> <title>再谈谈 Scoop 这个 Windows 下的软件包管理器 - The Art of Chawye Hsu</title> <link data-saber-head="ssr" rel="alternate" title="The Art of Chawye Hsu - Feed" href="/feed/atom.xml" type="application/atom+xml"><link data-saber-head="ssr" href="https://fonts.gstatic.com/" rel="preconnect" crossorigin="true"><link data-saber-head="ssr" href="https://cdn.jsdelivr.net/" rel="preconnect" crossorigin="true"><link data-saber-head="ssr" href="https://cdn.jsdelivr.net/npm/ionicons@4.6.3/dist/css/ionicons.min.css" rel="stylesheet"><link rel="stylesheet" href="/_saber/css/styles.14c831fc.chunk.css">  </head><body><div id="_saber" data-server-rendered="true"><div class="tach-root" data-v-56b6fe42><header class="tach-header" data-v-a67526d0 data-v-56b6fe42><div class="tach-wrapper" data-v-a67526d0><nav class="navbar" data-v-a67526d0><div class="container" data-v-a67526d0><div class="column navbar-brand" data-v-a67526d0><a href="/" class="navbar-item site-title router-link-active" data-v-a67526d0>The Art of Chawye Hsu</a> <span class="navbar-burger burger" data-v-a67526d0><span data-v-a67526d0></span> <span data-v-a67526d0></span> <span data-v-a67526d0></span></span></div> <div class="column navbar-menu" data-v-a67526d0><div class="navbar-end" data-v-a67526d0><a href="/blog" class="navbar-item router-link-active" data-v-a67526d0>Blog</a><a href="/guestbook" class="navbar-item" data-v-a67526d0>Guestbook</a><a href="/links" class="navbar-item" data-v-a67526d0>Links</a><a href="/about" class="navbar-item" data-v-a67526d0>About</a></div></div></div></nav></div></header> <main class="tach-main" data-v-56b6fe42><!----> <article role="main" itemscope="itemscope" itemtype="https://schema.org/Article" class="page-content" data-v-56b6fe42><div class="tach-page-wrapper" data-v-56b6fe42><header class="page-header" data-v-56b6fe42><!----> <section class="page-head-content" data-v-56b6fe42><h1 class="page-title is-family-sans" data-v-56b6fe42>再谈谈 Scoop 这个 Windows 下的软件包管理器</h1> <div class="page-meta" data-v-56b6fe42><section class="page-datetime" data-v-56b6fe42><time datetime="2018-05-12T13:44:39.000Z" class="published" data-v-56b6fe42>
                  2018-05-12 21:44:39
                </time></section> <section class="page-categories" data-v-56b6fe42><span data-v-56b6fe42><!----> <a href="/blog/category/technology" class="category" data-v-56b6fe42>
                    技术
                  </a></span></section></div></section></header> <!----> <section class="page-body" data-v-56b6fe42><Photoswipe auto="" data-v-56b6fe42><figure data-type="image" data-v-56b6fe42><img alt="Let us Scoop it!" title="Let us Scoop it!" src="https://cdn.jsdelivr.net/gh/h404bi/www.h404bi.com@gh-pages/_saber/images/20180512001.93a2af8a.gif" srcset="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-srcset="https://cdn.jsdelivr.net/gh/h404bi/www.h404bi.com@gh-pages/_saber/images/20180512001.93a2af8a.gif" data-pswp-title="Let us Scoop it!"><figcaption data-v-56b6fe42>Let us Scoop it!</figcaption></figure> <p data-v-56b6fe42>在 2015 年的《<a href="/blog/2015/08/use-scoop-to-enhance-windows-powershell">用 Scoop 改善 Windows Powershell</a>》博文中，我曾经介绍过这个令我眼前一亮的 Windows 软件包管理器。那是我刚开始使用上 Scoop 的时候，回看过去对它的介绍，也确像是一见钟情后的入坑纪实。简单，直接。</p> <p data-v-56b6fe42>那会我很快适应了 Scoop，并一直使用至今。经过这两年多的使用，我渐渐地更加依赖 Scoop 来管理一些软件。在我日常的 Windows 使用中，它带给我的便利，已不再仅仅是那时所言的“改善 Windows Powershell”。其实感觉就现在的 Scoop 而言，它确实还是挺小众的。只是最近我发现有些人通过搜索引擎浏览了我的那篇旧文，我觉得那篇文章太旧且简单了。于是挖下这么一个坑，写下这篇新文章更新下对 Scoop 的介绍与体会。</p> <hr data-v-56b6fe42> <h2 id="软件包管理器" data-v-56b6fe42>软件包管理器</h2> <blockquote data-v-56b6fe42><p data-v-56b6fe42><a rel="noopener noreferrer" target="_blank" href="https://scoop.sh/" data-v-56b6fe42>https://scoop.sh/</a></p></blockquote> <p data-v-56b6fe42>这是 Scoop 的官网首页。网站正中央醒目的 Slogan 已表明了它的定位，一个 Windows 下的命令行式的（软件）安装工具。</p> <blockquote data-v-56b6fe42><p data-v-56b6fe42>A command-line installer for Windows</p></blockquote> <p data-v-56b6fe42>虽然 Scoop 的作者在项目的 GitHub Wiki 中谈到，
Scoop 只是一个安装工具（installer），不应该被称为包管理器（package manager）。但是对于使用者而言，它与我们一般认为的软件包管理工具其实很是相似。</p> <p data-v-56b6fe42>作为对比，我列举一下常见的不同系统下类似的工具：</p> <table data-v-56b6fe42><thead data-v-56b6fe42><tr data-v-56b6fe42><th data-v-56b6fe42>系统</th> <th data-v-56b6fe42>工具</th> <th data-v-56b6fe42>范例</th> <th data-v-56b6fe42>备注</th></tr></thead> <tbody data-v-56b6fe42><tr data-v-56b6fe42><td data-v-56b6fe42>Arch Linux</td> <td data-v-56b6fe42>Pacman</td> <td data-v-56b6fe42>pacman -S pyenv</td> <td data-v-56b6fe42>Built-in</td></tr> <tr data-v-56b6fe42><td data-v-56b6fe42>CentOS/RHEL</td> <td data-v-56b6fe42>yum</td> <td data-v-56b6fe42>yum install python-wheel</td> <td data-v-56b6fe42>Built-in</td></tr> <tr data-v-56b6fe42><td data-v-56b6fe42>Debian/Ubuntu</td> <td data-v-56b6fe42>apt/apt-get</td> <td data-v-56b6fe42>apt install python3</td> <td data-v-56b6fe42>Built-in</td></tr> <tr data-v-56b6fe42><td data-v-56b6fe42>Fedora</td> <td data-v-56b6fe42>dnf</td> <td data-v-56b6fe42>dnf install python-pip</td> <td data-v-56b6fe42>Built-in</td></tr> <tr data-v-56b6fe42><td data-v-56b6fe42>macOS</td> <td data-v-56b6fe42>Homebrew</td> <td data-v-56b6fe42>brew install python</td> <td data-v-56b6fe42>3rd-party</td></tr> <tr data-v-56b6fe42><td data-v-56b6fe42>openSUSE</td> <td data-v-56b6fe42>zypper</td> <td data-v-56b6fe42>zypper install python3-pip</td> <td data-v-56b6fe42>Built-in</td></tr> <tr data-v-56b6fe42><td data-v-56b6fe42>Windows</td> <td data-v-56b6fe42>Chocolatey</td> <td data-v-56b6fe42>choco install docker</td> <td data-v-56b6fe42>3rd-party</td></tr></tbody></table> <p data-v-56b6fe42>这些工具的一个重要的特征是在终端下以<strong data-v-56b6fe42>命令行</strong>形式工作。所以很多情况下，安装一个软件时你不再需要使用浏览器打开
<a rel="noopener noreferrer" target="_blank" href="https://www.python.org/downloads/" data-v-56b6fe42>https://www.python.org/</a>
网页，找到并下载安装包，双击安装程序。而是直接一句命令，然后等完成就行了。</p> <figure data-type="image" class="right" data-v-56b6fe42><img alt="Homebrew" title="Homebrew" src="https://cdn.jsdelivr.net/gh/h404bi/www.h404bi.com@gh-pages/_saber/images/20180213002-0539aa25.png" srcset="data:image/png;base64,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" data-srcset="https://cdn.jsdelivr.net/gh/h404bi/www.h404bi.com@gh-pages/_saber/images/20180213002-0539aa25.png 256w" data-pswp-title="Homebrew" width="256"><figcaption data-v-56b6fe42>Homebrew</figcaption></figure> <p data-v-56b6fe42>作为一个以桌面环境专长的系统，Windows 自然不会有像 Arch Linux 亦或者 Debian
等以命令行环境起家的 Linux 系统那样，内置有这样的工具。不过，苹果家的 macOS
这个无论命令行环境还是桌面环境都好使的系统，却也没类似的工具。但在用户社区的不断发展下，<a rel="noopener noreferrer" target="_blank" href="https://brew.sh/" data-v-56b6fe42>Homebrew</a> 这个神器从社区中诞生，弥补了 macOS 的一大“缺陷”。那句充满自信的 Slogan，足以体现出 Homebrew
的地位。（更别提以<s data-v-56b6fe42>小号</s> Linuxbrew 身份扩散至 Linux 社区……会不会有
Windowsbrew/Winbrew 呢哈哈……）</p> <blockquote data-v-56b6fe42><p data-v-56b6fe42>Homebrew: The <strong data-v-56b6fe42>missing</strong> package manager for macOS</p></blockquote> <p data-v-56b6fe42>回到 Windows 这边厢。用户的需求与社区的发展必然也会催生类似的工具。在产生的这为数不多的几种工具中，巧克力（Chocolatey）是目前最为出名，相信也是用户数最为多的一个。从最初的开源项目，到现在的独立公司商业项目（仍开源），收获近 6000 个软件包与近 3 亿次包安装次数（2018 年 5 月官网数据）。甚至在 Windows 10 系统开始集成的官方“包管理器”（这里打引号是因为我觉得它已经超出了包管理器的基本范畴，更像是一个聚合物，一个超集）—— <a rel="noopener noreferrer" target="_blank" href="https://github.com/OneGet/oneget" data-v-56b6fe42>OneGet</a> 都提供了对 Chocolatey 源的支持，你可以直接用 OneGet 安装 Chocolatey 的软件包。</p> <p data-v-56b6fe42>但就像 NPM 之后的 Yarn 那样，轮子还是会有人重新造的。在 Chocolatey 之后的
2013 年，<a rel="noopener noreferrer" target="_blank" href="https://github.com/lukesampson" data-v-56b6fe42>lukesampson</a> 开发了 Scoop。我了解过但没并用过 Chocolatey，所以接下来我只能根据我对 Chocolatey 的短浅认识，来说一说我为什么一开始就选择用上了 Scoop。</p> <div class="gad" data-v-56b6fe42><ins data-ad-client="ca-pub-4381515676738667" data-ad-slot="8422573867" data-ad-format="fluid" data-ad-region="page-0.3835298697893177" data-ad-layout="in-article" data-full-width-responsive="false" class="adsbygoogle" style="display:block;"></ins></div> <h2 id="why-scoop" data-v-56b6fe42>Why Scoop</h2> <p style="position:relative;padding-bottom:56.25%;" data-v-56b6fe42><iframe src="https://www.youtube.com/embed/a85QLUJ0Wbs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen="allowfullscreen" style="position:absolute;width:100%;height:100%;" data-v-56b6fe42></iframe></p> <p data-v-56b6fe42>上方是 Scoop 刚发布时（我想也是唯一）的介绍视频，观看要能访问 Youtube。</p> <p data-v-56b6fe42>如上文说的我对 Scoop 的“一见钟情”，这里我换个表达：第一感觉。很多情况下第一感觉确实很能影响一些事情，不管人还是物。就从上面的视频里拿出来说一下，
Scoop 的安装说明真的很直截了当，有且仅有那一行命令，没有任何选择余地。就像 Homebrew 那样，将命令粘贴至终端回车就好了。我也看过 Chocolatey 的安装说明<sup class="footnote-ref" data-v-56b6fe42><a href="/blog/2018/05/talk-about-scoop-the-package-manager-for-windows-again#fn1" id="fnref1">[1]</a></sup>，虽然也提供了无脑一行命令的安装方式，但看到 More Install Options
我还是会研究一番看看怎么安装最优最合适，然后就不由自主地陷进去了。这里有个趣闻，Chocolatey 的创始人曾经在 Scoop 的 GitHub 项目下提 issue<sup class="footnote-ref" data-v-56b6fe42><a href="/blog/2018/05/talk-about-scoop-the-package-manager-for-windows-again#fn2" id="fnref2">[2]</a></sup>
询问 Scoop 能否整合 Chocolatey，并表示 Scoop 非常<strong data-v-56b6fe42>利落</strong>。</p> <p data-v-56b6fe42>上面是第一感观。第二个是 Scoop 跟 Chocolatey 对于管理员权限安装的部分的不同处理方式，直接让我倾向于先入手了 Scoop。Chocolatey 的安装脚本默认要求管理员权限安装，同时非管理员安装默认路径是 <code data-v-56b6fe42>C:\ProgramData\chocoportable</code>，这对于非高权限用户来说不太友好（比如没有管理员权限的工作机安装会比较折腾），而 Scoop 默认仅需普通用户权限，安装路径是 <code data-v-56b6fe42>%USERPROFILE%\scoop</code> 则显得比较清新，不过这都是可以根据需求修改的了。</p> <figure data-type="image" class="left" data-v-56b6fe42><img alt="Want some Chocolatey?" title="Want some Chocolatey?" src="https://cdn.jsdelivr.net/gh/h404bi/www.h404bi.com@gh-pages/_saber/images/20180506001-2491f87c.png" srcset="data:image/png;base64,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" data-srcset="https://cdn.jsdelivr.net/gh/h404bi/www.h404bi.com@gh-pages/_saber/images/20180506001-2491f87c.png 358w" data-pswp-title="Want some Chocolatey?" width="358"><figcaption data-v-56b6fe42>Want some Chocolatey?</figcaption></figure> <p data-v-56b6fe42>关于 Chocolatey 默认管理员权限安装的原因，应该是比较明显的：
Chocolatey 需要能处理安装更多的软件包，比如 Flash Player Plugin，
VirtualBox，以及 Windows 的各种 KB 补丁。因为默认管理员，所以很多只能以管理员身份安装到高权限目录的软件 Chocolatey 就能比较方便地处理了。而 Scoop 的处理方式则反过来，默认普通用户权限。软件包能限当前用户，不全局安装的就不全局安装。如果需要全局安装则自行利用 <code data-v-56b6fe42>-g</code> 参数提升为管理员权限安装。</p> <p data-v-56b6fe42>这极大地方便了低权限用户，同时用户目录安装不污染系统目录，比较讨喜“绿色用户”。我觉得 Chocolatey 才更像是命令行式软件安装工具（Installer），通过命令行来执行各种软件的安装。而 Scoop 在我看来优先解压包体的理念，反而更有 Homebrew
那种装瓶（bottle）与倾倒（poured）的感觉<sup class="footnote-ref" data-v-56b6fe42><a href="/blog/2018/05/talk-about-scoop-the-package-manager-for-windows-again#fn3" id="fnref3">[3]</a></sup>。</p> <p data-v-56b6fe42>第三个就是软件包（package）及其仓库。二者在这一部分的不同设计，让我决定了先放弃尝试 Chocolatey。首先是关于软件包的定义，Chocolatey 用的是
<code data-v-56b6fe42>.ps1</code> 脚本和 <code data-v-56b6fe42>.nuspec</code> 定义文件（xml），Scoop 用的是 json。乍一看你便会像
Chocolatey 作者对 Scoop 的评价那样：</p> <blockquote data-v-56b6fe42><p data-v-56b6fe42><strong data-v-56b6fe42>ferventcoder</strong>: this is super neat...</p></blockquote> <p data-v-56b6fe42>另一个是 Scoop 有用户软件包仓库的概念，官方仓库里没有你想用的软件包，又或者你想自定义一些软件包，那么可以自己建一个仓库，存放自己的软件包定义文件。在实际的使用体验上，相信也会更加喜欢 Scoop 这样的设计，它更接近于 Homebrew：软件包 manifest -&gt; Formula，仓库 bucket -&gt; tap。</p> <p data-v-56b6fe42>剩下的可以再通过上面的视频介绍自行体会一下。总的来说，
Chocolatey 能更加全面地包办绝大多数的软件安装，适应重度需求；而 Scoop 则更加简单利落，容易自定义软件包，适应中低需求。而我恰是后者，对于像 VirtualBox、Docker for Windows 这些需要高权限的软件还是会用安装包在用户界面下自定义安装。更特殊的用户倒是更可以将 Chocolatey 和 Scoop 结合使用。</p> <h2 id="how-scoop" data-v-56b6fe42>How Scoop</h2> <p data-v-56b6fe42>Scoop 需要 PowerShell 3 以上进行安装使用。最新的 Windows 10 系统已经是
PowerShell 5 了所以可以直接使用安装命令。Windows 7 的话默认是 PowerShell 2，可以根据微软的文档<sup class="footnote-ref" data-v-56b6fe42><a href="/blog/2018/05/talk-about-scoop-the-package-manager-for-windows-again#fn4" id="fnref4">[4]</a></sup>升级到 PowerShell 5，或者可以安装使用新的 <a rel="noopener noreferrer" target="_blank" href="https://docs.microsoft.com/en-us/powershell/scripting/setup/installing-powershell-core-on-windows?view=powershell-6" data-v-56b6fe42>PowerShell Core</a>，即 PowerShell 6。然后两句命令很快就安装好了：</p> <div class="saber-highlight" data-lang="powershell" data-v-56b6fe42><pre class="saber-highlight-code language-powershell" data-v-56b6fe42><code class="language-powershell" data-v-56b6fe42><span class="token comment" data-v-56b6fe42># 先设置 PowerShell 允许执行未签名脚本</span>
<span class="token function" data-v-56b6fe42>set</span><span class="token operator" data-v-56b6fe42>-</span>executionpolicy remotesigned <span class="token operator" data-v-56b6fe42>-</span>s currentuser
<span class="token comment" data-v-56b6fe42># 下载 Scoop 安装脚本进行安装</span>
<span class="token function" data-v-56b6fe42>iex</span> <span class="token punctuation" data-v-56b6fe42>(</span><span class="token function" data-v-56b6fe42>new-object</span> net<span class="token punctuation" data-v-56b6fe42>.</span>webclient<span class="token punctuation" data-v-56b6fe42>)</span><span class="token punctuation" data-v-56b6fe42>.</span>downloadstring<span class="token punctuation" data-v-56b6fe42>(</span><span class="token string" data-v-56b6fe42>'https://get.scoop.sh'</span><span class="token punctuation" data-v-56b6fe42>)</span></code></pre></div><figure data-type="image" data-v-56b6fe42><img alt="我这里已经安装过了" title="我这里已经安装过了" src="https://cdn.jsdelivr.net/gh/h404bi/www.h404bi.com@gh-pages/_saber/images/20180510001-176afb40.png" srcset="data:image/png;base64,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" data-srcset="https://cdn.jsdelivr.net/gh/h404bi/www.h404bi.com@gh-pages/_saber/images/20180510001-176afb40.png 644w,/_saber/images/20180510001-6f396238.png 480w" data-pswp-title="我这里已经安装过了" width="644"><figcaption data-v-56b6fe42>我这里已经安装过了</figcaption></figure> <p data-v-56b6fe42>由于 Scoop 的安装脚本托管在 GitHub 的仓库里，所以对于无法正常访问 GitHub
的用户来说，安装的时候可能需要加一层全局代理后再进行安装<sup class="footnote-ref" data-v-56b6fe42><a href="/blog/2018/05/talk-about-scoop-the-package-manager-for-windows-again#fn5" id="fnref5">[5]</a></sup>。</p> <p data-v-56b6fe42>执行 <code data-v-56b6fe42>scoop help</code> 看一下子命令就能快速上手，用过 Homebrew 的话应该更不在话下。比如 <code data-v-56b6fe42>scoop info &lt;app&gt;</code> 是最近新集成的子命令<sup class="footnote-ref" data-v-56b6fe42><a href="/blog/2018/05/talk-about-scoop-the-package-manager-for-windows-again#fn6" id="fnref6">[6]</a></sup>，在安装软件前可以对包体有个了解。</p> <div class="saber-highlight" data-lang="powershell" data-v-56b6fe42><pre class="saber-highlight-code language-powershell" data-v-56b6fe42><code class="language-powershell" data-v-56b6fe42>$ scoop info grep
Name:      grep
Version:   2<span class="token punctuation" data-v-56b6fe42>.</span>5<span class="token punctuation" data-v-56b6fe42>.</span>4
Website:   http:<span class="token operator" data-v-56b6fe42>/</span><span class="token operator" data-v-56b6fe42>/</span>gnuwin32<span class="token punctuation" data-v-56b6fe42>.</span>sourceforge<span class="token punctuation" data-v-56b6fe42>.</span>net<span class="token operator" data-v-56b6fe42>/</span>packages<span class="token operator" data-v-56b6fe42>/</span>grep<span class="token punctuation" data-v-56b6fe42>.</span>htm
License:   GPL<span class="token operator" data-v-56b6fe42>-</span>2<span class="token punctuation" data-v-56b6fe42>.</span>0 <span class="token punctuation" data-v-56b6fe42>(</span>https:<span class="token operator" data-v-56b6fe42>/</span><span class="token operator" data-v-56b6fe42>/</span>spdx<span class="token punctuation" data-v-56b6fe42>.</span>org<span class="token operator" data-v-56b6fe42>/</span>licenses<span class="token operator" data-v-56b6fe42>/</span>GPL<span class="token operator" data-v-56b6fe42>-</span>2<span class="token punctuation" data-v-56b6fe42>.</span>0<span class="token punctuation" data-v-56b6fe42>.</span>html<span class="token punctuation" data-v-56b6fe42>)</span>
Manifest:
  C:\Users\hanabi\scoop\apps\scoop\current\lib\<span class="token punctuation" data-v-56b6fe42>.</span><span class="token punctuation" data-v-56b6fe42>.</span>\bucket\grep<span class="token punctuation" data-v-56b6fe42>.</span>json
Installed: No
Binaries:
  bin\grep<span class="token punctuation" data-v-56b6fe42>.</span>exe</code></pre></div><p data-v-56b6fe42>然后就能像上面的视频里那样安装和使用软件包了。这里说一下，由于 Scoop 的设计以及其基于GitHub 的特性，一些软件包相信你会必定安装的：</p> <blockquote data-v-56b6fe42><p data-v-56b6fe42>scoop install git 7zip</p></blockquote> <p data-v-56b6fe42>就像介绍视频里说的那样，Scoop 默认不会污染用户的 PATH 环境变量（除非软件包有修改环境变量的定义），而是使用垫片（shims）来进行统一管理调用执行文件。</p> <figure data-type="image" class="right" data-v-56b6fe42><img alt="嗯，Bucket" title="嗯，Bucket" src="https://cdn.jsdelivr.net/gh/h404bi/www.h404bi.com@gh-pages/_saber/images/20180510002-e34c43c0.png" srcset="data:image/png;base64,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" data-srcset="https://cdn.jsdelivr.net/gh/h404bi/www.h404bi.com@gh-pages/_saber/images/20180510002-e34c43c0.png 200w" data-pswp-title="嗯，Bucket" width="200"><figcaption data-v-56b6fe42>嗯，Bucket</figcaption></figure> <p data-v-56b6fe42>当你通过 <code data-v-56b6fe42>scoop search &lt;app&gt;</code> 搜不到需要的软件包的时候，这时候便是你开始进阶使用 Scoop 的时候了。Scoop 管存放软件包描述文件的地方叫做桶（Bucket），桶里面就是一个个 json 格式的软件包描述文件，Scoop 的默认桶的名字就叫 <a rel="noopener noreferrer" target="_blank" href="https://github.com/lukesampson/scoop/tree/master/bucket" data-v-56b6fe42>bucket</a>。当找不到需要的软件的时候，最直接的自然是可以向仓库提交你想要的软件包的描述文件，比如像这些这样：<a rel="noopener noreferrer" target="_blank" href="https://github.com/lukesampson/scoop/pull/2151" data-v-56b6fe42>scoop/pull/2151</a>、
<a rel="noopener noreferrer" target="_blank" href="https://github.com/lukesampson/scoop/pull/2143" data-v-56b6fe42>scoop/pull/2143</a>、
<a rel="noopener noreferrer" target="_blank" href="https://github.com/lukesampson/scoop/pull/2002" data-v-56b6fe42>scoop/pull/2002</a>。</p> <p data-v-56b6fe42>不过在你进一步使用 Scoop 时，除了会遇到找不到软件包而可能会频繁提交描述文件之外，你还可能会对已有的某些软件包，有一些自己的“差异需求”，比如“不想某软件包设置某个环境变量”、或者“修改某个软件包的安装行为”。这时候，一个更好的办法：<strong data-v-56b6fe42>自定义桶</strong>。</p> <p data-v-56b6fe42>桶其实就像 Homebrew 的 Tap，关于桶的详细概念可以查看一下 Scoop 的 Wiki 页<sup class="footnote-ref" data-v-56b6fe42><a href="/blog/2018/05/talk-about-scoop-the-package-manager-for-windows-again#fn7" id="fnref7">[7]</a></sup>。通过自定义桶就可以将自己的“使用习惯”收纳起来，而不用频繁向 Scoop 的 main bucket
提交请求（Scoop 维护者一般也不能马上处理你的请求）。我维护着自己的桶，所以自己的软件包需求随时可以进行自定义：</p> <blockquote data-v-56b6fe42><p data-v-56b6fe42><a rel="noopener noreferrer" target="_blank" href="https://github.com/h404bi/dorado" data-v-56b6fe42>https://github.com/h404bi/dorado</a></p></blockquote> <p data-v-56b6fe42>比如 Scoop 的 main bucket 中的 nvm-windows 使用时会有 UAC 提权，我自己编译了一份没有 UAC 弹窗的 nvm-windows，放到了自己的桶里面。目前 dorado 这个 bucket，在目前已知在维护的 <a rel="noopener noreferrer" target="_blank" href="https://github.com/rasa/scoop-directory/blob/master/by-score.md" data-v-56b6fe42>Scoop bucket</a> 中已经是综合评分比较高的一个 bucket 了，所以欢迎 Star、
Fork 以及订阅使用。另外要说一下的是 Scoop 的自定义桶不一定要求存放到 GitHub 的公开仓库上的，所以完全可以在本地创建一个 git 仓库，做成一个不公开的私有桶，用于存放一些不宜公开的软件包。</p> <figure data-type="image" data-v-56b6fe42><img alt="Add a scoop bucket" src="https://cdn.jsdelivr.net/gh/h404bi/www.h404bi.com@gh-pages/_saber/images/20180512002.d3d96233.gif" srcset="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-srcset="https://cdn.jsdelivr.net/gh/h404bi/www.h404bi.com@gh-pages/_saber/images/20180512002.d3d96233.gif" data-pswp-title="Add a scoop bucket"><figcaption data-v-56b6fe42>Add a scoop bucket</figcaption></figure> <p data-v-56b6fe42>Scoop 还自带一个切换软件包版本的功能，可以让你在不同的软件包版本中进行自由切换。这个我想在上文的视频中你已经有看到了。这在你同时需要几个版本的软件包时会比较有用，比如 Python2 和 Python3（虽然 Python2 即将退役）。</p> <div class="saber-highlight" data-lang="powershell" data-v-56b6fe42><pre class="saber-highlight-code language-powershell" data-v-56b6fe42><code class="language-powershell" data-v-56b6fe42>$ scoop install python27 python
$ python <span class="token operator" data-v-56b6fe42>--</span>version        <span class="token comment" data-v-56b6fe42># -&gt; Python 3.6.x</span>

$ scoop reset python27
$ python <span class="token operator" data-v-56b6fe42>--</span>version        <span class="token comment" data-v-56b6fe42># -&gt; Python 2.7.x</span>

$ scoop reset python
$ python <span class="token operator" data-v-56b6fe42>--</span>version        <span class="token comment" data-v-56b6fe42># -&gt; Python 3.6.x</span></code></pre></div><p data-v-56b6fe42>我看到网络上有不少使用 Chocolatey 的人吐槽其下载安装软件包的时候奇慢，有的甚至因此而放弃继续使用 Chocolatey。通过 Scoop 本地自定义桶的话，拉取软件包描述文件的时候可以说是毫秒级的。然后还可以在描述文件里，自行修改软件包的下载链接，比如改成适合自己的 CDN 下载或者是私有软件源等。这样安装软件时会特别快速。这一切都得益于 Scoop 比 Chocolatey 更利落的软件包描述文件设计以及桶设计，用户自定义软件包所需的学习成本更低。</p> <h2 id="但-scoop-还有问题" data-v-56b6fe42>但 Scoop 还有问题</h2> <p data-v-56b6fe42>Scoop 是一个从个人项目开始，发展到现在由社区维护的开源项目。Scoop 不像 Chocolatey
那样已经成立公司，并推出商业版，它仍然是一个“个人”项目，只是目前靠着社区在维护。所以它的活跃度与维护情况肯定是不如 Chocolatey 的，一些缺点还是有的。这里我只说一下几点我认为的 Scoop 应该要在后续发展中优先考虑处理的问题。</p> <h3 id="没有稳定版" data-v-56b6fe42>没有稳定版</h3> <p data-v-56b6fe42>目前的 Scoop 本身的核心功能是“滚动更新”的，它没有版本号的概念，不像 Chocolatey<sup class="footnote-ref" data-v-56b6fe42><a href="/blog/2018/05/talk-about-scoop-the-package-manager-for-windows-again#fn8" id="fnref8">[8]</a></sup> 和 Homebrew<sup class="footnote-ref" data-v-56b6fe42><a href="/blog/2018/05/talk-about-scoop-the-package-manager-for-windows-again#fn9" id="fnref9">[9]</a></sup> 那样有 Releases，所以也就没有所谓稳定版本。只要 Scoop 的 GitHub 仓库有新的 commits，用户通过 <code data-v-56b6fe42>scoop update</code> 命令就会拉取所有的 commits 更新。</p> <figure data-type="image" class="right" data-v-56b6fe42><img alt="图来源于网络" src="https://cdn.jsdelivr.net/gh/h404bi/www.h404bi.com@gh-pages/_saber/images/20180512004-5b357bf3.png" srcset="data:image/png;base64,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" data-srcset="https://cdn.jsdelivr.net/gh/h404bi/www.h404bi.com@gh-pages/_saber/images/20180512004-5b357bf3.png 300w" data-pswp-title="图来源于网络" width="300"><figcaption data-v-56b6fe42>图来源于网络</figcaption></figure> <p data-v-56b6fe42>如此的滚动更新，对于一个社区维护的开源软件来说，会很容易产生问题。没有 tags，没有 releases，如果维护者或者贡献者在 commit 时不小心手抖加入或者修改了一些代码，造成了 BUG，并且 commit 的人还并不知情。这个 BUG 将很快地传到最终用户那里，因为用户更新时是立刻拉取最新 commit 的。这时遇到问题的用户，需要到 GitHub 上开 issue 反馈，或者开 Pull-Request。但有权限处理合并的协作者也就那么几位（创始人 Luke 不怎么活跃了<sup class="footnote-ref" data-v-56b6fe42><a href="/blog/2018/05/talk-about-scoop-the-package-manager-for-windows-again#fn10" id="fnref10">[10]</a></sup>，除了目前的 commit 数最多那位主要维护者外，其他几位协作者也是最近才加的），按以往的情况来看多数得半天以上时间才完成修复。</p> <ol data-v-56b6fe42><li data-v-56b6fe42><a rel="noopener noreferrer" target="_blank" href="https://github.com/lukesampson/scoop/issues/2144" data-v-56b6fe42>更新历史新功能导致 BUG 大概半天之后修复</a></li> <li data-v-56b6fe42><a rel="noopener noreferrer" target="_blank" href="https://github.com/lukesampson/scoop/issues/2243" data-v-56b6fe42>重构核心函数导致 BUG 大概半天之后修复</a></li> <li data-v-56b6fe42><a rel="noopener noreferrer" target="_blank" href="https://github.com/lukesampson/scoop/issues/2239" data-v-56b6fe42>重构核心函数导致 BUG 数天尚未完成修复</a></li></ol> <p data-v-56b6fe42>Scoop 目前的设计是很直接的，核心功能组件跟 main bucket 揉在一起，一更新 bucket
核心文件跟着更新。如果我没记错的话，早期的 Homebrew 也是这样的设计，而 Scoop
又是借鉴了 Homebrew 的设计。如今的 Homebrew 已经拆分为 brew 和 homebrew-core 两部分，前者是 brew 的核心功能代码，后者是默认的软件包仓库。brew 核心会打 release 包，用户在更新时会检查 brew 有没有新版本，如果没有则不会更新 brew 本身，只更新软件包仓库。</p> <div class="saber-highlight" data-lang="bash" data-v-56b6fe42><pre class="saber-highlight-code language-bash" data-v-56b6fe42><code class="language-bash" data-v-56b6fe42>$ brew -v
Homebrew <span class="token number" data-v-56b6fe42>1.6</span>.3
Homebrew/homebrew-core <span class="token punctuation" data-v-56b6fe42>(</span>git revision bdb1ff<span class="token punctuation" data-v-56b6fe42>;</span> last commit <span class="token number" data-v-56b6fe42>2018</span>-05-03<span class="token punctuation" data-v-56b6fe42>)</span></code></pre></div><p data-v-56b6fe42>我觉得 brew 这个新设计 Scoop 是需要跟进的。将 main bucket 从 Scoop 主仓库中分离出来，
Scoop 本身的仓库维护其核心功能代码，并打上 tags，发布 release 包，给 Scoop 一个版本号，定期更新稳定可用的版本。所有用户安装 Scoop 时，默认使用最新的稳定版，并克隆 main bucket 的最新 commit。而 Scoop 主仓库继续向前推进开发，开发者及少数激进的用户可以通过修改 <code data-v-56b6fe42>channel</code> 设置使用 nightly/insider 版本的 Scoop。这样即时新功能出 BUG 了，也不会马上传播到所有的 Scoop 用户，因为大部分用户用着稳定版。</p> <h3 id="仍需优化的核心功能" data-v-56b6fe42>仍需优化的核心功能</h3> <p data-v-56b6fe42>在我使用的这近三年里，除了一次默认安装路径的变动之外<sup class="footnote-ref" data-v-56b6fe42><a href="/blog/2018/05/talk-about-scoop-the-package-manager-for-windows-again#fn11" id="fnref11">[11]</a></sup>，在使用上其实并没有感受到 Scoop 有什么巨大的改动。它并没有什么 Breaking Changes，一直是平平淡淡稳定前进，加加子命令完善体验之类的，虽然 Scoop 似乎是被越来越多人发现，当然越来越多人用意味着会有越来越多的新需求和新问题（所以我才觉得得有稳定版本）。</p> <figure data-type="image" data-v-56b6fe42><img alt="Scoop 的 GitHub Stars 指数" src="https://cdn.jsdelivr.net/gh/h404bi/www.h404bi.com@gh-pages/_saber/images/20180512003-26834d30.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAXCAIAAAD2sJpCAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACWElEQVRIx71WyZLaMBDl/78q58k5lUOqMjOAARvwKqm1O0+WcTxmmYGYdEGV22r302v1okXbtlLK4/HovW9nFbj79nO7Xi3X62Sz2aa7XZJsjbERZoF/0zRJkgA+WHvvOvEn+VT1I5msRhn2EbBIk7Y9MMRaS0S9xcj6K+oHlh9X3Zmacx1fBGClVJZlQtDw5V0UJ/yufQvnldBc2XYItVbqsN8LIWYP9aDCrzT2yGRAGICfF+qxmnNl3N+lAAyuq9X6SYytdfBacIW0gnd32kcAxjJj7EmMAzFlQXdI7PY/hBq6se7QKHfWJAIw6L69vs4eajy0HqjUFe60rBdZlj6Dcd8upK6FngS5B97tdtiiJJoROL4SGvWjrnXixSZJOOPL9+UsoUbkQoTRlIzNammdvdZBF5yxGUMd+yKT5sBi1fqrjCNqUeSPAbuRYp3Hie4bCeD+pP1NYGMMTvreUJ9ehhaB5nBsJH54MLbL4c7qxrD6pzqGy5o0Bg6TVsc564dm3H7OWGudpultxt32fecJS05bh1GTM8kIzcFFCBh0ueW+Mp77M8YNZAC+OOxOp+gYBbySKwmOvvVncgfwJNSTXEXPw0QDv1LoguuG8OKR6XQh1NgUrj5C8N7YOakMKYuRkjOFngeK4Ie0GR2FGxfuaBYFuahOAtAzruqapETllcJUZCsytTQhQZ2f3N/OKT52FQzAJMT3l5cfv36neS2kyouiqcoYeaN1WZWQqMIyzwsYxJshkSjysoSqVHeFkkEpCq2DKjgPX1ZVV2BtZ0/I4s12Cyd/ANy0olfZ3QYAAAAAAElFTkSuQmCC" data-srcset="https://cdn.jsdelivr.net/gh/h404bi/www.h404bi.com@gh-pages/_saber/images/20180512003-26834d30.png 820w,/_saber/images/20180512003-c8b36f5c.png 720w,/_saber/images/20180512003-0f2981f9.png 480w" data-pswp-title="Scoop 的 GitHub Stars 指数" width="820"><figcaption data-v-56b6fe42>Scoop 的 GitHub Stars 指数</figcaption></figure> <p data-v-56b6fe42>不过没有大改动的同时，Scoop 的一些存在设计不足的核心功能，也照样是稳稳定定没有优化。这里我就说几个在使用 Scoop 时一定会遇到的情况：</p> <p data-v-56b6fe42>第一个。<code data-v-56b6fe42>scoop install &lt;app&gt;</code> 安装软件包的命令。当你使用的自定义 bucket 当中有跟主 bucket 有相同名字的软件包描述文件的时候，直接执行 <code data-v-56b6fe42>scoop install &lt;app&gt;</code>
默认会选择主 bucket 中的描述文件进行安装。你不得不卸载软件包并重新执行
<code data-v-56b6fe42>scoop install &lt;bucket&gt;/&lt;app&gt;</code> 进行安装。对于有自定义桶的用户来说，估计会经常遇到，因为一时疏忽就忘了 bucket 名字直接敲软件名字安装了。关于这个点，最近才有人开了个新 issue 讨论这个问题<sup class="footnote-ref" data-v-56b6fe42><a href="/blog/2018/05/talk-about-scoop-the-package-manager-for-windows-again#fn12" id="fnref12">[12]</a></sup>。</p> <p data-v-56b6fe42>第二个。<code data-v-56b6fe42>scoop uninstall &lt;app&gt;</code> 卸载软件包的命令。当你卸载一个软件包，而恰好这个软件正在运行的时候。目前的卸载指令会让这个软件包处于一个
“没卸载干净”的状态<sup class="footnote-ref" data-v-56b6fe42><a href="/blog/2018/05/talk-about-scoop-the-package-manager-for-windows-again#fn13" id="fnref13">[13]</a></sup>。只要执行卸载，便会马上清理相关的 shims，shortcuts，然后删到一些不能删的文件了，就会提示文件正在使用不能清理。更好的设计应该是先检查文件是否有占用，是否有服务在运行。没有才开始清理 shims 等。这样软件包可以要么是完全卸载干净了、要么还是正常的安装状态。</p> <p data-v-56b6fe42>第三个。<code data-v-56b6fe42>scoop cleanup &lt;app&gt;</code> 清理旧版本软件包的命令。这个命令有跟上面的卸载命令有类似的问题。用 Scoop 更新了软件后，当前运行着的其实还是旧版本的软件，然后清理会把旧版本的清理掉，这时会跟卸载命令一样，删到一些不能删的文件了，才会提示文件正在使用不能清理，让旧版本软件变成一个“没卸载干净又不再可用”的状态。</p> <p data-v-56b6fe42>第四个。<code data-v-56b6fe42>scoop update &lt;app&gt;</code> 更新软件包的命令。Scoop 的更新命令的逻辑是这样的，当执行更新一个软件包时，它会先卸载旧的版本（清理 shims、shortcuts 等），给新版本预创建目录，然后下载新版本并检查安装包的哈希值。当哈希值正确时，才进行安装。那如果下载软件包过程中断线了呢？或者哈希值不对呢？于是问题来了，恰恰是这样的逻辑，会导致一个大概会是你用 Scoop 时最经常遇到的问题——软件实际上没更新成功，但 Scoop 却给你显示软件已经是最新的版本，并且旧版本无法使用<sup class="footnote-ref" data-v-56b6fe42><a href="/blog/2018/05/talk-about-scoop-the-package-manager-for-windows-again#fn14" id="fnref14">[14]</a></sup><sup class="footnote-ref" data-v-56b6fe42><a href="/blog/2018/05/talk-about-scoop-the-package-manager-for-windows-again#fn15" id="fnref15">[15]</a></sup>。你不得不执行 uninstall 命令并重新安装软件，或者 reset 命令重置软件。这个问题我相信只要是 Scoop 用户，都会经历过。</p> <p data-v-56b6fe42>回头看一下你会发现，我所讲的这几点基本上覆盖了 Scoop 最常用的几个命令：安装、卸载、更新、清理，这几个都是 Scoop 最最核心的功能。自我开始用 Scoop 到现在，这几个毛病就一直存在着。所以我才说，Scoop 的一些核心功能仍然存在不足需要改进。到目前还没有优化，也许是没有很好的解决方案吧。</p> <h2 id="结语" data-v-56b6fe42>结语</h2> <p data-v-56b6fe42>回看全文下来，我觉得文章算了符合了我原本想写成的，以我的角度更新对 Scoop
的介绍与体会的形式。对比、优点、缺点都稍微讲到了，应该不会有强烈的安利感觉。我看到访问记录有人从搜索引擎搜 Chocolatey 和 Scoop 的对比，找到了我原来那篇文章。想必也是想做个选择。其实如果你是偏重度的用户，想尽量多的软件可以用命令行管理，又不在乎我前文说的 Chocolatey 的软件包描述文件相对复杂等缺点的话，其实可以去试试使用 Chocolatey。而如果你没那么强烈的需求，只是像我一样有一点点
“绿色软件洁癖”，同时想用命令行管理部分软件包，并且以此构建一个相对轻量的命令行环境的话，不妨可以尝试一下 PowerShell + Scoop + Cmder 这套组合。或者，Chocolatey 和 Scoop 二者一起用也是可以的。</p> <hr class="footnotes-sep" data-v-56b6fe42> <section class="footnotes" data-v-56b6fe42><ol class="footnotes-list" data-v-56b6fe42><li id="fn1" class="footnote-item" data-v-56b6fe42><p data-v-56b6fe42><a rel="noopener noreferrer" target="_blank" href="https://chocolatey.org/install#more-install-options" data-v-56b6fe42>https://chocolatey.org/install#more-install-options</a> <a href="/blog/2018/05/talk-about-scoop-the-package-manager-for-windows-again#fnref1" class="footnote-backref">↩︎</a></p></li> <li id="fn2" class="footnote-item" data-v-56b6fe42><p data-v-56b6fe42><a rel="noopener noreferrer" target="_blank" href="https://github.com/lukesampson/scoop/issues/2" data-v-56b6fe42>https://github.com/lukesampson/scoop/issues/2</a> <a href="/blog/2018/05/talk-about-scoop-the-package-manager-for-windows-again#fnref2" class="footnote-backref">↩︎</a></p></li> <li id="fn3" class="footnote-item" data-v-56b6fe42><p data-v-56b6fe42><a rel="noopener noreferrer" target="_blank" href="https://github.com/Homebrew/brew/blob/master/docs/Bottles.md" data-v-56b6fe42>https://github.com/Homebrew/brew/blob/master/docs/Bottles.md</a> <a href="/blog/2018/05/talk-about-scoop-the-package-manager-for-windows-again#fnref3" class="footnote-backref">↩︎</a></p></li> <li id="fn4" class="footnote-item" data-v-56b6fe42><p data-v-56b6fe42><a rel="noopener noreferrer" target="_blank" href="https://docs.microsoft.com/en-us/powershell/scripting/setup/installing-windows-powershell?view=powershell-6#upgrading-existing-windows-powershell" data-v-56b6fe42>https://docs.microsoft.com/en-us/powershell/scripting/setup/installing-windows-powershell?view=powershell-6#upgrading-existing-windows-powershell</a> <a href="/blog/2018/05/talk-about-scoop-the-package-manager-for-windows-again#fnref4" class="footnote-backref">↩︎</a></p></li> <li id="fn5" class="footnote-item" data-v-56b6fe42><p data-v-56b6fe42><a rel="noopener noreferrer" target="_blank" href="https://github.com/lukesampson/scoop/issues/2227" data-v-56b6fe42>https://github.com/lukesampson/scoop/issues/2227</a> <a href="/blog/2018/05/talk-about-scoop-the-package-manager-for-windows-again#fnref5" class="footnote-backref">↩︎</a></p></li> <li id="fn6" class="footnote-item" data-v-56b6fe42><p data-v-56b6fe42><a rel="noopener noreferrer" target="_blank" href="https://github.com/lukesampson/scoop/pull/2165" data-v-56b6fe42>https://github.com/lukesampson/scoop/pull/2165</a> <a href="/blog/2018/05/talk-about-scoop-the-package-manager-for-windows-again#fnref6" class="footnote-backref">↩︎</a></p></li> <li id="fn7" class="footnote-item" data-v-56b6fe42><p data-v-56b6fe42><a rel="noopener noreferrer" target="_blank" href="https://github.com/lukesampson/scoop/wiki/Buckets" data-v-56b6fe42>https://github.com/lukesampson/scoop/wiki/Buckets</a> <a href="/blog/2018/05/talk-about-scoop-the-package-manager-for-windows-again#fnref7" class="footnote-backref">↩︎</a></p></li> <li id="fn8" class="footnote-item" data-v-56b6fe42><p data-v-56b6fe42><a rel="noopener noreferrer" target="_blank" href="https://github.com/chocolatey/choco/blob/master/CHANGELOG.md" data-v-56b6fe42>https://github.com/chocolatey/choco/blob/master/CHANGELOG.md</a> <a href="/blog/2018/05/talk-about-scoop-the-package-manager-for-windows-again#fnref8" class="footnote-backref">↩︎</a></p></li> <li id="fn9" class="footnote-item" data-v-56b6fe42><p data-v-56b6fe42><a rel="noopener noreferrer" target="_blank" href="https://github.com/Homebrew/brew/releases" data-v-56b6fe42>https://github.com/Homebrew/brew/releases</a> <a href="/blog/2018/05/talk-about-scoop-the-package-manager-for-windows-again#fnref9" class="footnote-backref">↩︎</a></p></li> <li id="fn10" class="footnote-item" data-v-56b6fe42><p data-v-56b6fe42><a rel="noopener noreferrer" target="_blank" href="https://github.com/lukesampson/scoop/graphs/contributors" data-v-56b6fe42>https://github.com/lukesampson/scoop/graphs/contributors</a> <a href="/blog/2018/05/talk-about-scoop-the-package-manager-for-windows-again#fnref10" class="footnote-backref">↩︎</a></p></li> <li id="fn11" class="footnote-item" data-v-56b6fe42><p data-v-56b6fe42><a rel="noopener noreferrer" target="_blank" href="https://github.com/lukesampson/scoop/blob/master/lib/core.ps1#L1" data-v-56b6fe42>https://github.com/lukesampson/scoop/blob/master/lib/core.ps1#L1</a> <a href="/blog/2018/05/talk-about-scoop-the-package-manager-for-windows-again#fnref11" class="footnote-backref">↩︎</a></p></li> <li id="fn12" class="footnote-item" data-v-56b6fe42><p data-v-56b6fe42><a rel="noopener noreferrer" target="_blank" href="https://github.com/lukesampson/scoop/issues/2121" data-v-56b6fe42>https://github.com/lukesampson/scoop/issues/2121</a> <a href="/blog/2018/05/talk-about-scoop-the-package-manager-for-windows-again#fnref12" class="footnote-backref">↩︎</a></p></li> <li id="fn13" class="footnote-item" data-v-56b6fe42><p data-v-56b6fe42><a rel="noopener noreferrer" target="_blank" href="https://github.com/lukesampson/scoop/issues/488" data-v-56b6fe42>https://github.com/lukesampson/scoop/issues/488</a> <a href="/blog/2018/05/talk-about-scoop-the-package-manager-for-windows-again#fnref13" class="footnote-backref">↩︎</a></p></li> <li id="fn14" class="footnote-item" data-v-56b6fe42><p data-v-56b6fe42><a rel="noopener noreferrer" target="_blank" href="https://github.com/lukesampson/scoop/issues/2220" data-v-56b6fe42>https://github.com/lukesampson/scoop/issues/2220</a> <a href="/blog/2018/05/talk-about-scoop-the-package-manager-for-windows-again#fnref14" class="footnote-backref">↩︎</a></p></li> <li id="fn15" class="footnote-item" data-v-56b6fe42><p data-v-56b6fe42><a rel="noopener noreferrer" target="_blank" href="https://github.com/lukesampson/scoop/issues/2245" data-v-56b6fe42>https://github.com/lukesampson/scoop/issues/2245</a> <a href="/blog/2018/05/talk-about-scoop-the-package-manager-for-windows-again#fnref15" class="footnote-backref">↩︎</a></p></li></ol></section></Photoswipe></section> <!----> <section class="page-comments" data-v-56b6fe42><div id="load-disqus"><a class="tach-button">Leave a comment</a></div> <div id="disqus_thread"></div></section> <footer class="page-footer" data-v-56b6fe42></footer></div></article></main> <footer class="tach-footer footer" data-v-31eb1a8b data-v-56b6fe42><div class="tach-wrapper" data-v-31eb1a8b><div class="container" data-v-31eb1a8b><!----> <section class="section" data-v-31eb1a8b><div class="social-network" data-v-31eb1a8b><ul data-v-31eb1a8b><li data-v-31eb1a8b><a target="_blank" rel="noopener" href="https://twitter.com/chawyehsu" class="icon ion-logo-twitter" data-v-31eb1a8b data-v-31eb1a8b></a></li><li data-v-31eb1a8b><a target="_blank" rel="noopener" href="https://www.instagram.com/chawyehsu/" class="icon ion-logo-instagram" data-v-31eb1a8b data-v-31eb1a8b></a></li><li data-v-31eb1a8b><a target="_blank" rel="noopener" href="https://github.com/h404bi" class="icon ion-logo-github" data-v-31eb1a8b data-v-31eb1a8b></a></li><li data-v-31eb1a8b><a target="_blank" rel="noopener" href="https://steamcommunity.com/id/h404bi/" class="icon ion-logo-game-controller-b" data-v-31eb1a8b data-v-31eb1a8b></a></li><li data-v-31eb1a8b><a target="_blank" rel="noopener" href="https://music.163.com/#/user/home?id=35631431" class="icon ion-ios-musical-notes" data-v-31eb1a8b data-v-31eb1a8b></a></li></ul></div></section> <section class="section" data-v-31eb1a8b><div class="copyright" data-v-31eb1a8b>
          © 2015-2020 Chawye Hsu. Made with <span style="color:#b30e2e" data-v-31eb1a8b>♥</span> in Guangzhou
        </div></section></div></div></footer></div></div><script src="/_saber/js/styles.14c831fc.js" defer></script><script src="/_saber/js/page--_posts-2018-05-12-talk-about-scoop-the-package-manager-for-windows-again-md.1108077e.js" defer></script><script src="/_saber/js/client.440b0978.js" defer></script></body></html>
