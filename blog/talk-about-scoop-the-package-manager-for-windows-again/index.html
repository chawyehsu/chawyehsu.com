<!DOCTYPE html><html data-saber-ssr lang="zh-CN" data-saber-head="%7B%22lang%22:%7B%22ssr%22:%22zh-CN%22%7D%7D"><head><meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="ie=edge" /><meta data-saber-head="ssr" name="generator" content="Saber v0.11.7"><meta data-saber-head="ssr" name="author" content="Chawye Hsu"><meta data-saber-head="ssr" property="og:type" content="website"><meta data-saber-head="ssr" name="twitter:card" content="summary"><meta data-saber-head="ssr" name="twitter:creator" content="Chawye Hsu"><meta data-saber-head="ssr" name="description" content="与 Chocolatey Windows 包管理工具（Package Manager）相比，Scoop 是一款更为轻量的 Windows 包管理器。本文将对比 Chocolatey Scoop 这两款工具的区别，介绍一下 Scoop 安装使用体验，如果你没有重度的包管理需求，不妨可以尝试一下 Scoop PowerShell Concfg 这套组合。" data-hid="description"><meta data-saber-head="ssr" name="keywords" content="blog,blogger,个人博客,中文独立博客"><meta data-saber-head="ssr" property="og:title" content="再谈谈 Scoop 这个 Windows 下的软件包管理器"><meta data-saber-head="ssr" property="og:description" content="与 Chocolatey Windows 包管理工具（Package Manager）相比，Scoop 是一款更为轻量的 Windows 包管理器。本文将对比 Chocolatey Scoop 这两款工具的区别，介绍一下 Scoop 安装使用体验，如果你没有重度的包管理需求，不妨可以尝试一下 Scoop PowerShell Concfg 这套组合。"><meta data-saber-head="ssr" name="twitter:title" content="再谈谈 Scoop 这个 Windows 下的软件包管理器"><meta data-saber-head="ssr" name="twitter:description" content="与 Chocolatey Windows 包管理工具（Package Manager）相比，Scoop 是一款更为轻量的 Windows 包管理器。本文将对比 Chocolatey Scoop 这两款工具的区别，介绍一下 Scoop 安装使用体验，如果你没有重度的包管理需求，不妨可以尝试一下 Scoop PowerShell Concfg 这套组合。"><meta data-saber-head="ssr" property="og:image" content="https://chawyehsu.comhttps://cdn.jsdelivr.net/gh/chawyehsu/chawyehsu.com@gh-pages/_saber/images/20180510001-8fe1c496.png"><meta data-saber-head="ssr" property="twitter:image:src" content="https://chawyehsu.comhttps://cdn.jsdelivr.net/gh/chawyehsu/chawyehsu.com@gh-pages/_saber/images/20180510001-8fe1c496.png"><link rel="manifest" href="/manifest.json" /><meta name="theme-color" content="#ffffff" /><link rel="apple-touch-icon" sizes="32x32" href="_saber/images/icons/icon_32x32.png" /><link rel="apple-touch-icon" sizes="128x128" href="_saber/images/icons/icon_128x128.png" /><link rel="apple-touch-icon" sizes="256x256" href="_saber/images/icons/icon_256x256.png" /><link rel="apple-touch-icon" sizes="512x512" href="_saber/images/icons/icon_512x512.png" /> <title>再谈谈 Scoop 这个 Windows 下的软件包管理器 - The Art of Chawye Hsu</title> <link data-saber-head="ssr" rel="alternate" title="The Art of Chawye Hsu - Feed" href="https://chawyehsu.com/feed/atom.xml" type="application/atom+xml"><link data-saber-head="ssr" href="https://use.typekit.net/" rel="preconnect" crossorigin="true"><link data-saber-head="ssr" href="https://cdn.jsdelivr.net/" rel="preconnect" crossorigin="true"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/chawyehsu/chawyehsu.com@gh-pages/_saber/css/styles.5797a3b7.chunk.css">  </head><body><div id="_saber" data-server-rendered="true"><div class="tach-root" data-v-837d0d68><header class="tach-header" data-v-cec5f8de data-v-837d0d68><div class="tach-wrapper" data-v-cec5f8de><nav class="navbar" data-v-cec5f8de><div class="container" data-v-cec5f8de><div class="column navbar-brand" data-v-cec5f8de><a href="/" class="navbar-item site-title router-link-active" data-v-cec5f8de>The Art of Chawye Hsu</a> <span class="navbar-burger burger" data-v-cec5f8de><span data-v-cec5f8de></span> <span data-v-cec5f8de></span> <span data-v-cec5f8de></span></span></div> <div class="column navbar-menu" data-v-cec5f8de><div class="navbar-end" data-v-cec5f8de><a href="/blog" class="navbar-item router-link-active" data-v-cec5f8de>Blog</a><a href="/guestbook" class="navbar-item" data-v-cec5f8de>Guestbook</a><a href="/links" class="navbar-item" data-v-cec5f8de>Links</a><a href="/about" class="navbar-item" data-v-cec5f8de>About</a></div></div></div></nav></div></header> <main class="tach-main" data-v-837d0d68><!----> <article role="main" itemscope="itemscope" itemtype="https://schema.org/Article" class="page-content" data-v-837d0d68><div class="page-inner-wrapper tach-page-wrapper" data-v-837d0d68><header class="page-header" data-v-837d0d68><!----> <section class="page-head-content" data-v-837d0d68><h1 class="page-title" data-v-837d0d68>再谈谈 Scoop 这个 Windows 下的软件包管理器</h1> <div class="page-meta" data-v-837d0d68><section class="page-datetime" data-v-837d0d68><time datetime="2018-05-12T13:44:39.000Z" class="published" data-v-837d0d68>
                  2018-05-12
                </time></section> <!----></div></section></header> <!----> <section class="page-body" data-v-837d0d68><Photoswipe auto="" options="[object Object]" data-v-837d0d68><figure data-type="image" data-v-837d0d68><img alt="" title="Let us Scoop it!" src="https://cdn.jsdelivr.net/gh/chawyehsu/chawyehsu.com@gh-pages/_saber/images/20180512001.07bfd8a6.gif" srcset="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-srcset="https://cdn.jsdelivr.net/gh/chawyehsu/chawyehsu.com@gh-pages/_saber/images/20180512001.07bfd8a6.gif" data-pswp-title=""><figcaption data-v-837d0d68>Let us Scoop it!</figcaption></figure> <p data-v-837d0d68>在 2015 年的《<a href="/blog/2015/08/use-scoop-to-enhance-windows-powershell" data-v-837d0d68>用 Scoop 改善 Windows Powershell</a>》博文中，我曾经介绍过这个令我眼前一亮的 Windows 软件包管理器。那是我刚开始使用上 Scoop 的时候，回看过去对它的介绍，也确像是一见钟情后的入坑纪实。简单，直接。</p> <p data-v-837d0d68>那会我很快适应了 Scoop，并一直使用至今。经过这两年多的使用，我渐渐地更加依赖 Scoop 来管理一些软件。在我日常的 Windows 使用中，它带给我的便利，已不再仅仅是那时所言的“改善 Windows Powershell”。其实感觉就现在的 Scoop 而言，它确实还是挺小众的。只是最近我发现有些人通过搜索引擎浏览了我的那篇旧文，我觉得那篇文章太旧且简单了。于是挖下这么一个坑，写下这篇新文章更新下对 Scoop 的介绍与体会。</p> <hr data-v-837d0d68> <h2 id="软件包管理器" data-v-837d0d68>软件包管理器</h2> <blockquote data-v-837d0d68><p data-v-837d0d68><a rel="noopener noreferrer" target="_blank" href="https://scoop.sh/" data-v-837d0d68>https://scoop.sh/</a></p></blockquote> <p data-v-837d0d68>这是 Scoop 的官网首页。网站正中央醒目的 Slogan 已表明了它的定位，一个 Windows 下的命令行式的（软件）安装工具。</p> <blockquote data-v-837d0d68><p data-v-837d0d68>A command-line installer for Windows</p></blockquote> <p data-v-837d0d68>虽然 Scoop 的作者在项目的 GitHub Wiki 中谈到，
Scoop 只是一个安装工具（installer），不应该被称为包管理器（package manager）。但是对于使用者而言，它与我们一般认为的软件包管理工具其实很是相似。</p> <p data-v-837d0d68>作为对比，我列举一下常见的不同系统下类似的工具：</p> <table data-v-837d0d68><thead data-v-837d0d68><tr data-v-837d0d68><th data-v-837d0d68>系统</th> <th data-v-837d0d68>工具</th> <th data-v-837d0d68>范例</th> <th data-v-837d0d68>备注</th></tr></thead> <tbody data-v-837d0d68><tr data-v-837d0d68><td data-v-837d0d68>Arch Linux</td> <td data-v-837d0d68>Pacman</td> <td data-v-837d0d68>pacman -S pyenv</td> <td data-v-837d0d68>Built-in</td></tr> <tr data-v-837d0d68><td data-v-837d0d68>CentOS/RHEL</td> <td data-v-837d0d68>yum</td> <td data-v-837d0d68>yum install python-wheel</td> <td data-v-837d0d68>Built-in</td></tr> <tr data-v-837d0d68><td data-v-837d0d68>Debian/Ubuntu</td> <td data-v-837d0d68>apt/apt-get</td> <td data-v-837d0d68>apt install python3</td> <td data-v-837d0d68>Built-in</td></tr> <tr data-v-837d0d68><td data-v-837d0d68>Fedora</td> <td data-v-837d0d68>dnf</td> <td data-v-837d0d68>dnf install python-pip</td> <td data-v-837d0d68>Built-in</td></tr> <tr data-v-837d0d68><td data-v-837d0d68>macOS</td> <td data-v-837d0d68>Homebrew</td> <td data-v-837d0d68>brew install python</td> <td data-v-837d0d68>3rd-party</td></tr> <tr data-v-837d0d68><td data-v-837d0d68>openSUSE</td> <td data-v-837d0d68>zypper</td> <td data-v-837d0d68>zypper install python3-pip</td> <td data-v-837d0d68>Built-in</td></tr> <tr data-v-837d0d68><td data-v-837d0d68>Windows</td> <td data-v-837d0d68>Chocolatey</td> <td data-v-837d0d68>choco install docker</td> <td data-v-837d0d68>3rd-party</td></tr></tbody></table> <p data-v-837d0d68>这些工具的一个重要的特征是在终端下以<strong data-v-837d0d68>命令行</strong>形式工作。所以很多情况下，安装一个软件时你不再需要使用浏览器打开
<a rel="noopener noreferrer" target="_blank" href="https://www.python.org/downloads/" data-v-837d0d68>https://www.python.org/</a>
网页，找到并下载安装包，双击安装程序。而是直接一句命令，然后等完成就行了。</p> <figure data-type="image" class="right" data-v-837d0d68><img alt="" title="Homebrew" src="https://cdn.jsdelivr.net/gh/chawyehsu/chawyehsu.com@gh-pages/_saber/images/20180213002-f8b182de.png" srcset="data:image/png;base64,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" data-srcset="https://cdn.jsdelivr.net/gh/chawyehsu/chawyehsu.com@gh-pages/_saber/images/20180213002-f8b182de.png 256w" data-pswp-title="" width="256"><figcaption data-v-837d0d68>Homebrew</figcaption></figure> <p data-v-837d0d68>作为一个以桌面环境专长的系统，Windows 自然不会有像 Arch Linux 亦或者 Debian
等以命令行环境起家的 Linux 系统那样，内置有这样的工具。不过，苹果家的 macOS
这个无论命令行环境还是桌面环境都好使的系统，却也没类似的工具。但在用户社区的不断发展下，<a rel="noopener noreferrer" target="_blank" href="https://brew.sh/" data-v-837d0d68>Homebrew</a> 这个神器从社区中诞生，弥补了 macOS 的一大“缺陷”。那句充满自信的 Slogan，足以体现出 Homebrew
的地位。（更别提以<s data-v-837d0d68>小号</s> Linuxbrew 身份扩散至 Linux 社区……会不会有
Windowsbrew/Winbrew 呢哈哈……）</p> <blockquote data-v-837d0d68><p data-v-837d0d68>Homebrew: The <strong data-v-837d0d68>missing</strong> package manager for macOS</p></blockquote> <p data-v-837d0d68>回到 Windows 这边厢。用户的需求与社区的发展必然也会催生类似的工具。在产生的这为数不多的几种工具中，巧克力（Chocolatey）是目前最为出名，相信也是用户数最为多的一个。从最初的开源项目，到现在的独立公司商业项目（仍开源），收获近 6000 个软件包与近 3 亿次包安装次数（2018 年 5 月官网数据）。甚至在 Windows 10 系统开始集成的官方“包管理器”（这里打引号是因为我觉得它已经超出了包管理器的基本范畴，更像是一个聚合物，一个超集）—— <a rel="noopener noreferrer" target="_blank" href="https://github.com/OneGet/oneget" data-v-837d0d68>OneGet</a> 都提供了对 Chocolatey 源的支持，你可以直接用 OneGet 安装 Chocolatey 的软件包。</p> <p data-v-837d0d68>但就像 NPM 之后的 Yarn 那样，轮子还是会有人重新造的。在 Chocolatey 之后的
2013 年，<a rel="noopener noreferrer" target="_blank" href="https://github.com/lukesampson" data-v-837d0d68>lukesampson</a> 开发了 Scoop。我了解过但没并用过 Chocolatey，所以接下来我只能根据我对 Chocolatey 的短浅认识，来说一说我为什么一开始就选择用上了 Scoop。</p> <div class="gad" data-v-837d0d68><ins data-ad-client="ca-pub-4381515676738667" data-ad-slot="8422573867" data-ad-format="fluid" data-ad-region="page-0.9903264214338607" data-ad-layout="in-article" data-full-width-responsive="false" class="adsbygoogle" style="display:block;"></ins></div> <h2 id="why-scoop" data-v-837d0d68>Why Scoop</h2> <p style="position:relative;padding-bottom:56.25%;" data-v-837d0d68><iframe src="https://www.youtube.com/embed/a85QLUJ0Wbs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen="allowfullscreen" style="position:absolute;width:100%;height:100%;" data-v-837d0d68></iframe></p> <p data-v-837d0d68>上方是 Scoop 刚发布时（我想也是唯一）的介绍视频，观看要能访问 Youtube。</p> <p data-v-837d0d68>如上文说的我对 Scoop 的“一见钟情”，这里我换个表达：第一感觉。很多情况下第一感觉确实很能影响一些事情，不管人还是物。就从上面的视频里拿出来说一下，
Scoop 的安装说明真的很直截了当，有且仅有那一行命令，没有任何选择余地。就像 Homebrew 那样，将命令粘贴至终端回车就好了。我也看过 Chocolatey 的安装说明<sup class="footnote-ref" data-v-837d0d68><a href="/blog/talk-about-scoop-the-package-manager-for-windows-again#fn1" id="fnref1">[1]</a></sup>，虽然也提供了无脑一行命令的安装方式，但看到 More Install Options
我还是会研究一番看看怎么安装最优最合适，然后就不由自主地陷进去了。这里有个趣闻，Chocolatey 的创始人曾经在 Scoop 的 GitHub 项目下提 issue<sup class="footnote-ref" data-v-837d0d68><a href="/blog/talk-about-scoop-the-package-manager-for-windows-again#fn2" id="fnref2">[2]</a></sup>
询问 Scoop 能否整合 Chocolatey，并表示 Scoop 非常<strong data-v-837d0d68>利落</strong>。</p> <p data-v-837d0d68>上面是第一感观。第二个是 Scoop 跟 Chocolatey 对于管理员权限安装的部分的不同处理方式，直接让我倾向于先入手了 Scoop。Chocolatey 的安装脚本默认要求管理员权限安装，同时非管理员安装默认路径是 <code data-v-837d0d68>C:\ProgramData\chocoportable</code>，这对于非高权限用户来说不太友好（比如没有管理员权限的工作机安装会比较折腾），而 Scoop 默认仅需普通用户权限，安装路径是 <code data-v-837d0d68>%USERPROFILE%\scoop</code> 则显得比较清新，不过这都是可以根据需求修改的了。</p> <figure data-type="image" class="left" data-v-837d0d68><img alt="" title="Want some Chocolatey?" src="https://cdn.jsdelivr.net/gh/chawyehsu/chawyehsu.com@gh-pages/_saber/images/20180506001-2491f87c.png" srcset="data:image/png;base64,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" data-srcset="https://cdn.jsdelivr.net/gh/chawyehsu/chawyehsu.com@gh-pages/_saber/images/20180506001-2491f87c.png 358w" data-pswp-title="" width="358"><figcaption data-v-837d0d68>Want some Chocolatey?</figcaption></figure> <p data-v-837d0d68>关于 Chocolatey 默认管理员权限安装的原因，应该是比较明显的：
Chocolatey 需要能处理安装更多的软件包，比如 Flash Player Plugin，
VirtualBox，以及 Windows 的各种 KB 补丁。因为默认管理员，所以很多只能以管理员身份安装到高权限目录的软件 Chocolatey 就能比较方便地处理了。而 Scoop 的处理方式则反过来，默认普通用户权限。软件包能限当前用户，不全局安装的就不全局安装。如果需要全局安装则自行利用 <code data-v-837d0d68>-g</code> 参数提升为管理员权限安装。</p> <p data-v-837d0d68>这极大地方便了低权限用户，同时用户目录安装不污染系统目录，比较讨喜“绿色用户”。我觉得 Chocolatey 才更像是命令行式软件安装工具（Installer），通过命令行来执行各种软件的安装。而 Scoop 在我看来优先解压包体的理念，反而更有 Homebrew
那种装瓶（bottle）与倾倒（poured）的感觉<sup class="footnote-ref" data-v-837d0d68><a href="/blog/talk-about-scoop-the-package-manager-for-windows-again#fn3" id="fnref3">[3]</a></sup>。</p> <p data-v-837d0d68>第三个就是软件包（package）及其仓库。二者在这一部分的不同设计，让我决定了先放弃尝试 Chocolatey。首先是关于软件包的定义，Chocolatey 用的是
<code data-v-837d0d68>.ps1</code> 脚本和 <code data-v-837d0d68>.nuspec</code> 定义文件（xml），Scoop 用的是 json。乍一看你便会像
Chocolatey 作者对 Scoop 的评价那样：</p> <blockquote data-v-837d0d68><p data-v-837d0d68><strong data-v-837d0d68>ferventcoder</strong>: this is super neat...</p></blockquote> <p data-v-837d0d68>另一个是 Scoop 有用户软件包仓库的概念，官方仓库里没有你想用的软件包，又或者你想自定义一些软件包，那么可以自己建一个仓库，存放自己的软件包定义文件。在实际的使用体验上，相信也会更加喜欢 Scoop 这样的设计，它更接近于 Homebrew：软件包 manifest -&gt; Formula，仓库 bucket -&gt; tap。</p> <p data-v-837d0d68>剩下的可以再通过上面的视频介绍自行体会一下。总的来说，
Chocolatey 能更加全面地包办绝大多数的软件安装，适应重度需求；而 Scoop 则更加简单利落，容易自定义软件包，适应中低需求。而我恰是后者，对于像 VirtualBox、Docker for Windows 这些需要高权限的软件还是会用安装包在用户界面下自定义安装。更特殊的用户倒是更可以将 Chocolatey 和 Scoop 结合使用。</p> <h2 id="how-scoop" data-v-837d0d68>How Scoop</h2> <p data-v-837d0d68>Scoop 需要 PowerShell 3 以上进行安装使用。最新的 Windows 10 系统已经是
PowerShell 5 了所以可以直接使用安装命令。Windows 7 的话默认是 PowerShell 2，可以根据微软的文档<sup class="footnote-ref" data-v-837d0d68><a href="/blog/talk-about-scoop-the-package-manager-for-windows-again#fn4" id="fnref4">[4]</a></sup>升级到 PowerShell 5，或者可以安装使用新的 <a rel="noopener noreferrer" target="_blank" href="https://docs.microsoft.com/en-us/powershell/scripting/setup/installing-powershell-core-on-windows?view=powershell-6" data-v-837d0d68>PowerShell Core</a>，即 PowerShell 6。然后两句命令很快就安装好了：</p> <div class="saber-highlight" data-lang="powershell" data-v-837d0d68><pre class="saber-highlight-code language-powershell" data-v-837d0d68><code class="language-powershell" data-v-837d0d68><span class="token comment" data-v-837d0d68># 先设置 PowerShell 允许执行未签名脚本</span>
<span class="token function" data-v-837d0d68>set-executionpolicy</span> remotesigned <span class="token operator" data-v-837d0d68>-</span>s currentuser
<span class="token comment" data-v-837d0d68># 下载 Scoop 安装脚本进行安装</span>
<span class="token function" data-v-837d0d68>iex</span> <span class="token punctuation" data-v-837d0d68>(</span><span class="token function" data-v-837d0d68>new-object</span> net<span class="token punctuation" data-v-837d0d68>.</span>webclient<span class="token punctuation" data-v-837d0d68>)</span><span class="token punctuation" data-v-837d0d68>.</span>downloadstring<span class="token punctuation" data-v-837d0d68>(</span><span class="token string" data-v-837d0d68>'https://get.scoop.sh'</span><span class="token punctuation" data-v-837d0d68>)</span></code></pre></div><figure data-type="image" data-v-837d0d68><img alt="" title="我这里已经安装过了" src="https://cdn.jsdelivr.net/gh/chawyehsu/chawyehsu.com@gh-pages/_saber/images/20180510001-8fe1c496.png" srcset="data:image/png;base64,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" data-srcset="https://cdn.jsdelivr.net/gh/chawyehsu/chawyehsu.com@gh-pages/_saber/images/20180510001-8fe1c496.png 644w,https://cdn.jsdelivr.net/gh/chawyehsu/chawyehsu.com@gh-pages/_saber/images/20180510001-ac1b4b52.png 480w" data-pswp-title="" width="644"><figcaption data-v-837d0d68>我这里已经安装过了</figcaption></figure> <p data-v-837d0d68>由于 Scoop 的安装脚本托管在 GitHub 的仓库里，所以对于无法正常访问 GitHub
的用户来说，安装的时候可能需要加一层全局代理后再进行安装<sup class="footnote-ref" data-v-837d0d68><a href="/blog/talk-about-scoop-the-package-manager-for-windows-again#fn5" id="fnref5">[5]</a></sup>。</p> <p data-v-837d0d68>执行 <code data-v-837d0d68>scoop help</code> 看一下子命令就能快速上手，用过 Homebrew 的话应该更不在话下。比如 <code data-v-837d0d68>scoop info &lt;app&gt;</code> 是最近新集成的子命令<sup class="footnote-ref" data-v-837d0d68><a href="/blog/talk-about-scoop-the-package-manager-for-windows-again#fn6" id="fnref6">[6]</a></sup>，在安装软件前可以对包体有个了解。</p> <div class="saber-highlight" data-lang="powershell" data-v-837d0d68><pre class="saber-highlight-code language-powershell" data-v-837d0d68><code class="language-powershell" data-v-837d0d68>$ scoop info grep
Name:      grep
Version:   2<span class="token punctuation" data-v-837d0d68>.</span>5<span class="token punctuation" data-v-837d0d68>.</span>4
Website:   http:<span class="token operator" data-v-837d0d68>/</span><span class="token operator" data-v-837d0d68>/</span>gnuwin32<span class="token punctuation" data-v-837d0d68>.</span>sourceforge<span class="token punctuation" data-v-837d0d68>.</span>net<span class="token operator" data-v-837d0d68>/</span>packages<span class="token operator" data-v-837d0d68>/</span>grep<span class="token punctuation" data-v-837d0d68>.</span>htm
License:   GPL<span class="token operator" data-v-837d0d68>-</span>2<span class="token punctuation" data-v-837d0d68>.</span>0 <span class="token punctuation" data-v-837d0d68>(</span>https:<span class="token operator" data-v-837d0d68>/</span><span class="token operator" data-v-837d0d68>/</span>spdx<span class="token punctuation" data-v-837d0d68>.</span>org<span class="token operator" data-v-837d0d68>/</span>licenses<span class="token operator" data-v-837d0d68>/</span>GPL<span class="token operator" data-v-837d0d68>-</span>2<span class="token punctuation" data-v-837d0d68>.</span>0<span class="token punctuation" data-v-837d0d68>.</span>html<span class="token punctuation" data-v-837d0d68>)</span>
Manifest:
  C:\Users\hanabi\scoop\apps\scoop\current\lib\<span class="token punctuation" data-v-837d0d68>.</span><span class="token punctuation" data-v-837d0d68>.</span>\bucket\grep<span class="token punctuation" data-v-837d0d68>.</span>json
Installed: No
Binaries:
  bin\grep<span class="token punctuation" data-v-837d0d68>.</span>exe</code></pre></div><p data-v-837d0d68>然后就能像上面的视频里那样安装和使用软件包了。这里说一下，由于 Scoop 的设计以及其基于GitHub 的特性，一些软件包相信你会必定安装的：</p> <blockquote data-v-837d0d68><p data-v-837d0d68>scoop install git 7zip</p></blockquote> <p data-v-837d0d68>就像介绍视频里说的那样，Scoop 默认不会污染用户的 PATH 环境变量（除非软件包有修改环境变量的定义），而是使用垫片（shims）来进行统一管理调用执行文件。</p> <figure data-type="image" class="right" data-v-837d0d68><img alt="" title="嗯，Bucket" src="https://cdn.jsdelivr.net/gh/chawyehsu/chawyehsu.com@gh-pages/_saber/images/20180510002-45d3d53a.png" srcset="data:image/png;base64,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" data-srcset="https://cdn.jsdelivr.net/gh/chawyehsu/chawyehsu.com@gh-pages/_saber/images/20180510002-45d3d53a.png 200w" data-pswp-title="" width="200"><figcaption data-v-837d0d68>嗯，Bucket</figcaption></figure> <p data-v-837d0d68>当你通过 <code data-v-837d0d68>scoop search &lt;app&gt;</code> 搜不到需要的软件包的时候，这时候便是你开始进阶使用 Scoop 的时候了。Scoop 管存放软件包描述文件的地方叫做桶（Bucket），桶里面就是一个个 json 格式的软件包描述文件，Scoop 的默认桶的名字就叫 <a rel="noopener noreferrer" target="_blank" href="https://github.com/lukesampson/scoop/tree/master/bucket" data-v-837d0d68>bucket</a>。当找不到需要的软件的时候，最直接的自然是可以向仓库提交你想要的软件包的描述文件，比如像这些这样：<a rel="noopener noreferrer" target="_blank" href="https://github.com/lukesampson/scoop/pull/2151" data-v-837d0d68>scoop/pull/2151</a>、
<a rel="noopener noreferrer" target="_blank" href="https://github.com/lukesampson/scoop/pull/2143" data-v-837d0d68>scoop/pull/2143</a>、
<a rel="noopener noreferrer" target="_blank" href="https://github.com/lukesampson/scoop/pull/2002" data-v-837d0d68>scoop/pull/2002</a>。</p> <p data-v-837d0d68>不过在你进一步使用 Scoop 时，除了会遇到找不到软件包而可能会频繁提交描述文件之外，你还可能会对已有的某些软件包，有一些自己的“差异需求”，比如“不想某软件包设置某个环境变量”、或者“修改某个软件包的安装行为”。这时候，一个更好的办法：<strong data-v-837d0d68>自定义桶</strong>。</p> <p data-v-837d0d68>桶其实就像 Homebrew 的 Tap，关于桶的详细概念可以查看一下 Scoop 的 Wiki 页<sup class="footnote-ref" data-v-837d0d68><a href="/blog/talk-about-scoop-the-package-manager-for-windows-again#fn7" id="fnref7">[7]</a></sup>。通过自定义桶就可以将自己的“使用习惯”收纳起来，而不用频繁向 Scoop 的 main bucket
提交请求（Scoop 维护者一般也不能马上处理你的请求）。我维护着自己的桶，所以自己的软件包需求随时可以进行自定义：</p> <blockquote data-v-837d0d68><p data-v-837d0d68><a rel="noopener noreferrer" target="_blank" href="https://github.com/chawyehsu/dorado" data-v-837d0d68>https://github.com/chawyehsu/dorado</a></p></blockquote> <p data-v-837d0d68>比如 Scoop 的 main bucket 中的 nvm-windows 使用时会有 UAC 提权，我自己编译了一份没有 UAC 弹窗的 nvm-windows，放到了自己的桶里面。目前 dorado 这个 bucket，在目前已知在维护的 <a rel="noopener noreferrer" target="_blank" href="https://github.com/rasa/scoop-directory/blob/master/by-score.md" data-v-837d0d68>Scoop bucket</a> 中已经是综合评分比较高的一个 bucket 了，所以欢迎 Star、
Fork 以及订阅使用。另外要说一下的是 Scoop 的自定义桶不一定要求存放到 GitHub 的公开仓库上的，所以完全可以在本地创建一个 git 仓库，做成一个不公开的私有桶，用于存放一些不宜公开的软件包。</p> <figure data-type="image" data-v-837d0d68><img alt="" src="https://cdn.jsdelivr.net/gh/chawyehsu/chawyehsu.com@gh-pages/_saber/images/20180512002.8668afe2.gif" srcset="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-srcset="https://cdn.jsdelivr.net/gh/chawyehsu/chawyehsu.com@gh-pages/_saber/images/20180512002.8668afe2.gif" data-pswp-title=""><figcaption data-v-837d0d68>Add a scoop bucket</figcaption></figure> <p data-v-837d0d68>Scoop 还自带一个切换软件包版本的功能，可以让你在不同的软件包版本中进行自由切换。这个我想在上文的视频中你已经有看到了。这在你同时需要几个版本的软件包时会比较有用，比如 Python2 和 Python3（虽然 Python2 即将退役）。</p> <div class="saber-highlight" data-lang="powershell" data-v-837d0d68><pre class="saber-highlight-code language-powershell" data-v-837d0d68><code class="language-powershell" data-v-837d0d68>$ scoop install python27 python
$ python <span class="token operator" data-v-837d0d68>--</span>version        <span class="token comment" data-v-837d0d68># -&gt; Python 3.6.x</span>

$ scoop reset python27
$ python <span class="token operator" data-v-837d0d68>--</span>version        <span class="token comment" data-v-837d0d68># -&gt; Python 2.7.x</span>

$ scoop reset python
$ python <span class="token operator" data-v-837d0d68>--</span>version        <span class="token comment" data-v-837d0d68># -&gt; Python 3.6.x</span></code></pre></div><p data-v-837d0d68>我看到网络上有不少使用 Chocolatey 的人吐槽其下载安装软件包的时候奇慢，有的甚至因此而放弃继续使用 Chocolatey。通过 Scoop 本地自定义桶的话，拉取软件包描述文件的时候可以说是毫秒级的。然后还可以在描述文件里，自行修改软件包的下载链接，比如改成适合自己的 CDN 下载或者是私有软件源等。这样安装软件时会特别快速。这一切都得益于 Scoop 比 Chocolatey 更利落的软件包描述文件设计以及桶设计，用户自定义软件包所需的学习成本更低。</p> <div class="gad" data-v-837d0d68><ins data-ad-client="ca-pub-4381515676738667" data-ad-slot="1370220280" data-ad-format="fluid" data-ad-region="page-0.5598741836748169" data-ad-layout="in-article" data-full-width-responsive="false" class="adsbygoogle" style="display:block;"></ins></div> <h2 id="但-scoop-还有问题" data-v-837d0d68>但 Scoop 还有问题</h2> <p data-v-837d0d68>Scoop 是一个从个人项目开始，发展到现在由社区维护的开源项目。Scoop 不像 Chocolatey
那样已经成立公司，并推出商业版，它仍然是一个“个人”项目，只是目前靠着社区在维护。所以它的活跃度与维护情况肯定是不如 Chocolatey 的，一些缺点还是有的。这里我只说一下几点我认为的 Scoop 应该要在后续发展中优先考虑处理的问题。</p> <h3 id="没有稳定版" data-v-837d0d68>没有稳定版</h3> <p data-v-837d0d68>目前的 Scoop 本身的核心功能是“滚动更新”的，它没有版本号的概念，不像 Chocolatey<sup class="footnote-ref" data-v-837d0d68><a href="/blog/talk-about-scoop-the-package-manager-for-windows-again#fn8" id="fnref8">[8]</a></sup> 和 Homebrew<sup class="footnote-ref" data-v-837d0d68><a href="/blog/talk-about-scoop-the-package-manager-for-windows-again#fn9" id="fnref9">[9]</a></sup> 那样有 Releases，所以也就没有所谓稳定版本。只要 Scoop 的 GitHub 仓库有新的 commits，用户通过 <code data-v-837d0d68>scoop update</code> 命令就会拉取所有的 commits 更新。</p> <figure data-type="image" class="right" data-v-837d0d68><img alt="" src="https://cdn.jsdelivr.net/gh/chawyehsu/chawyehsu.com@gh-pages/_saber/images/20180512004-46f81763.png" srcset="data:image/png;base64,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" data-srcset="https://cdn.jsdelivr.net/gh/chawyehsu/chawyehsu.com@gh-pages/_saber/images/20180512004-46f81763.png 300w" data-pswp-title="" width="300"><figcaption data-v-837d0d68>图来源于网络</figcaption></figure> <p data-v-837d0d68>如此的滚动更新，对于一个社区维护的开源软件来说，会很容易产生问题。没有 tags，没有 releases，如果维护者或者贡献者在 commit 时不小心手抖加入或者修改了一些代码，造成了 BUG，并且 commit 的人还并不知情。这个 BUG 将很快地传到最终用户那里，因为用户更新时是立刻拉取最新 commit 的。这时遇到问题的用户，需要到 GitHub 上开 issue 反馈，或者开 Pull-Request。但有权限处理合并的协作者也就那么几位（创始人 Luke 不怎么活跃了<sup class="footnote-ref" data-v-837d0d68><a href="/blog/talk-about-scoop-the-package-manager-for-windows-again#fn10" id="fnref10">[10]</a></sup>，除了目前的 commit 数最多那位主要维护者外，其他几位协作者也是最近才加的），按以往的情况来看多数得半天以上时间才完成修复。</p> <ol data-v-837d0d68><li data-v-837d0d68><a rel="noopener noreferrer" target="_blank" href="https://github.com/lukesampson/scoop/issues/2144" data-v-837d0d68>更新历史新功能导致 BUG 大概半天之后修复</a></li> <li data-v-837d0d68><a rel="noopener noreferrer" target="_blank" href="https://github.com/lukesampson/scoop/issues/2243" data-v-837d0d68>重构核心函数导致 BUG 大概半天之后修复</a></li> <li data-v-837d0d68><a rel="noopener noreferrer" target="_blank" href="https://github.com/lukesampson/scoop/issues/2239" data-v-837d0d68>重构核心函数导致 BUG 数天尚未完成修复</a></li></ol> <p data-v-837d0d68>Scoop 目前的设计是很直接的，核心功能组件跟 main bucket 揉在一起，一更新 bucket
核心文件跟着更新。如果我没记错的话，早期的 Homebrew 也是这样的设计，而 Scoop
又是借鉴了 Homebrew 的设计。如今的 Homebrew 已经拆分为 brew 和 homebrew-core 两部分，前者是 brew 的核心功能代码，后者是默认的软件包仓库。brew 核心会打 release 包，用户在更新时会检查 brew 有没有新版本，如果没有则不会更新 brew 本身，只更新软件包仓库。</p> <div class="saber-highlight" data-lang="bash" data-v-837d0d68><pre class="saber-highlight-code language-bash" data-v-837d0d68><code class="language-bash" data-v-837d0d68>$ brew -v
Homebrew <span class="token number" data-v-837d0d68>1.6</span>.3
Homebrew/homebrew-core <span class="token punctuation" data-v-837d0d68>(</span>git revision bdb1ff<span class="token punctuation" data-v-837d0d68>;</span> last commit <span class="token number" data-v-837d0d68>2018</span>-05-03<span class="token punctuation" data-v-837d0d68>)</span></code></pre></div><p data-v-837d0d68>我觉得 brew 这个新设计 Scoop 是需要跟进的。将 main bucket 从 Scoop 主仓库中分离出来，
Scoop 本身的仓库维护其核心功能代码，并打上 tags，发布 release 包，给 Scoop 一个版本号，定期更新稳定可用的版本。所有用户安装 Scoop 时，默认使用最新的稳定版，并克隆 main bucket 的最新 commit。而 Scoop 主仓库继续向前推进开发，开发者及少数激进的用户可以通过修改 <code data-v-837d0d68>channel</code> 设置使用 nightly/insider 版本的 Scoop。这样即时新功能出 BUG 了，也不会马上传播到所有的 Scoop 用户，因为大部分用户用着稳定版。</p> <h3 id="仍需优化的核心功能" data-v-837d0d68>仍需优化的核心功能</h3> <p data-v-837d0d68>在我使用的这近三年里，除了一次默认安装路径的变动之外<sup class="footnote-ref" data-v-837d0d68><a href="/blog/talk-about-scoop-the-package-manager-for-windows-again#fn11" id="fnref11">[11]</a></sup>，在使用上其实并没有感受到 Scoop 有什么巨大的改动。它并没有什么 Breaking Changes，一直是平平淡淡稳定前进，加加子命令完善体验之类的，虽然 Scoop 似乎是被越来越多人发现，当然越来越多人用意味着会有越来越多的新需求和新问题（所以我才觉得得有稳定版本）。</p> <figure data-type="image" data-v-837d0d68><img alt="" src="https://cdn.jsdelivr.net/gh/chawyehsu/chawyehsu.com@gh-pages/_saber/images/20180512003-26834d30.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAXCAIAAAD2sJpCAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACSElEQVRIx7VW247aMBDl/z+s7WsfVuoTEhUgSGwnS3wb24n3xIbcQF12S0YhZOLL8Tkez2QTY5RSHo/HENrupYbp3vYV54wxLoSoq4px7oPHe4Bu8LPWCMGNMXjuByQbx3/mzsDmrdlisvz3rp314QoM895n4Iw99H7GjRNbtOZFDK4LXaVdfu6Bjdb7/V5r/XLGUxeTC0mZ7hW4DUE2zRpSDy5m1hRqTQkiri714CJwmaR20tQDQ+Tdbree1JiUNdaQjynUR+BVGeN+MR7XENgjMBYGumsAw7cucDlu7QgMKZSSf1eTugDZeWq6AiNn9ZsfwhqMa+WU9fGRbc6ns3OuqqpXAQ/nB0mqVnSn8Q34cDgCEveXSI2E34cx8r/xiOTc/WEG3YDuC6MaRqGttUNqbOdIS8Z9CnUOgv8P45SWO90HsAVR8u3DqWaMc2QJLr4EjBe4cnccmEpZ3tg6VZ4sdR7xCfC3pSZUG0XAA8XuibFLqYnoH9UpJLtN0bfD1eRRahC05HxcitE+U543GQwfIVPG7d2y879xAWCAlND09rKb5MKvMV5IHSe9sQKQA4xQBFWRhQyFOMuJT1Wnx8BQ43CTGs/Oh4umi3aIFyHtu7INKkuuMzGpl07rsBGDnqll3JeFuzgFmXHHOa+lxtkTyiHjKApQFR3uV/u9evyYsZLy188fv9/+FKImS4yVjBXY9fQdaEtWwrIrm8vpdIapJA/c4lSWxVmnbTJGF8UZF0b11fDSFGWBT0zsYwaTSqEabbdbzPEBOXWgwBXKVIMAAAAASUVORK5CYII=" data-srcset="https://cdn.jsdelivr.net/gh/chawyehsu/chawyehsu.com@gh-pages/_saber/images/20180512003-26834d30.png 820w,https://cdn.jsdelivr.net/gh/chawyehsu/chawyehsu.com@gh-pages/_saber/images/20180512003-aabf88c3.png 720w,https://cdn.jsdelivr.net/gh/chawyehsu/chawyehsu.com@gh-pages/_saber/images/20180512003-8cd3b684.png 480w" data-pswp-title="" width="820"><figcaption data-v-837d0d68>Scoop 的 GitHub Stars 指数</figcaption></figure> <p data-v-837d0d68>不过没有大改动的同时，Scoop 的一些存在设计不足的核心功能，也照样是稳稳定定没有优化。这里我就说几个在使用 Scoop 时一定会遇到的情况：</p> <p data-v-837d0d68>第一个。<code data-v-837d0d68>scoop install &lt;app&gt;</code> 安装软件包的命令。当你使用的自定义 bucket 当中有跟主 bucket 有相同名字的软件包描述文件的时候，直接执行 <code data-v-837d0d68>scoop install &lt;app&gt;</code>
默认会选择主 bucket 中的描述文件进行安装。你不得不卸载软件包并重新执行
<code data-v-837d0d68>scoop install &lt;bucket&gt;/&lt;app&gt;</code> 进行安装。对于有自定义桶的用户来说，估计会经常遇到，因为一时疏忽就忘了 bucket 名字直接敲软件名字安装了。关于这个点，最近才有人开了个新 issue 讨论这个问题<sup class="footnote-ref" data-v-837d0d68><a href="/blog/talk-about-scoop-the-package-manager-for-windows-again#fn12" id="fnref12">[12]</a></sup>。</p> <p data-v-837d0d68>第二个。<code data-v-837d0d68>scoop uninstall &lt;app&gt;</code> 卸载软件包的命令。当你卸载一个软件包，而恰好这个软件正在运行的时候。目前的卸载指令会让这个软件包处于一个
“没卸载干净”的状态<sup class="footnote-ref" data-v-837d0d68><a href="/blog/talk-about-scoop-the-package-manager-for-windows-again#fn13" id="fnref13">[13]</a></sup>。只要执行卸载，便会马上清理相关的 shims，shortcuts，然后删到一些不能删的文件了，就会提示文件正在使用不能清理。更好的设计应该是先检查文件是否有占用，是否有服务在运行。没有才开始清理 shims 等。这样软件包可以要么是完全卸载干净了、要么还是正常的安装状态。</p> <p data-v-837d0d68>第三个。<code data-v-837d0d68>scoop cleanup &lt;app&gt;</code> 清理旧版本软件包的命令。这个命令有跟上面的卸载命令有类似的问题。用 Scoop 更新了软件后，当前运行着的其实还是旧版本的软件，然后清理会把旧版本的清理掉，这时会跟卸载命令一样，删到一些不能删的文件了，才会提示文件正在使用不能清理，让旧版本软件变成一个“没卸载干净又不再可用”的状态。</p> <p data-v-837d0d68>第四个。<code data-v-837d0d68>scoop update &lt;app&gt;</code> 更新软件包的命令。Scoop 的更新命令的逻辑是这样的，当执行更新一个软件包时，它会先卸载旧的版本（清理 shims、shortcuts 等），给新版本预创建目录，然后下载新版本并检查安装包的哈希值。当哈希值正确时，才进行安装。那如果下载软件包过程中断线了呢？或者哈希值不对呢？于是问题来了，恰恰是这样的逻辑，会导致一个大概会是你用 Scoop 时最经常遇到的问题——软件实际上没更新成功，但 Scoop 却给你显示软件已经是最新的版本，并且旧版本无法使用<sup class="footnote-ref" data-v-837d0d68><a href="/blog/talk-about-scoop-the-package-manager-for-windows-again#fn14" id="fnref14">[14]</a></sup><sup class="footnote-ref" data-v-837d0d68><a href="/blog/talk-about-scoop-the-package-manager-for-windows-again#fn15" id="fnref15">[15]</a></sup>。你不得不执行 uninstall 命令并重新安装软件，或者 reset 命令重置软件。这个问题我相信只要是 Scoop 用户，都会经历过。</p> <p data-v-837d0d68>回头看一下你会发现，我所讲的这几点基本上覆盖了 Scoop 最常用的几个命令：安装、卸载、更新、清理，这几个都是 Scoop 最最核心的功能。自我开始用 Scoop 到现在，这几个毛病就一直存在着。所以我才说，Scoop 的一些核心功能仍然存在不足需要改进。到目前还没有优化，也许是没有很好的解决方案吧。</p> <h2 id="结语" data-v-837d0d68>结语</h2> <p data-v-837d0d68>回看全文下来，我觉得文章算了符合了我原本想写成的，以我的角度更新对 Scoop
的介绍与体会的形式。对比、优点、缺点都稍微讲到了，应该不会有强烈的安利感觉。我看到访问记录有人从搜索引擎搜 Chocolatey 和 Scoop 的对比，找到了我原来那篇文章。想必也是想做个选择。其实如果你是偏重度的用户，想尽量多的软件可以用命令行管理，又不在乎我前文说的 Chocolatey 的软件包描述文件相对复杂等缺点的话，其实可以去试试使用 Chocolatey。而如果你没那么强烈的需求，只是像我一样有一点点
“绿色软件洁癖”，同时想用命令行管理部分软件包，并且以此构建一个相对轻量的命令行环境的话，不妨可以尝试一下 PowerShell + Scoop + Cmder 这套组合。或者，Chocolatey 和 Scoop 二者一起用也是可以的。</p> <hr class="footnotes-sep" data-v-837d0d68> <section class="footnotes" data-v-837d0d68><ol class="footnotes-list" data-v-837d0d68><li id="fn1" class="footnote-item" data-v-837d0d68><p data-v-837d0d68><a rel="noopener noreferrer" target="_blank" href="https://chocolatey.org/install#more-install-options" data-v-837d0d68>https://chocolatey.org/install#more-install-options</a> <a href="/blog/talk-about-scoop-the-package-manager-for-windows-again#fnref1" class="footnote-backref">↩︎</a></p></li> <li id="fn2" class="footnote-item" data-v-837d0d68><p data-v-837d0d68><a rel="noopener noreferrer" target="_blank" href="https://github.com/lukesampson/scoop/issues/2" data-v-837d0d68>https://github.com/lukesampson/scoop/issues/2</a> <a href="/blog/talk-about-scoop-the-package-manager-for-windows-again#fnref2" class="footnote-backref">↩︎</a></p></li> <li id="fn3" class="footnote-item" data-v-837d0d68><p data-v-837d0d68><a rel="noopener noreferrer" target="_blank" href="https://github.com/Homebrew/brew/blob/master/docs/Bottles.md" data-v-837d0d68>https://github.com/Homebrew/brew/blob/master/docs/Bottles.md</a> <a href="/blog/talk-about-scoop-the-package-manager-for-windows-again#fnref3" class="footnote-backref">↩︎</a></p></li> <li id="fn4" class="footnote-item" data-v-837d0d68><p data-v-837d0d68><a rel="noopener noreferrer" target="_blank" href="https://docs.microsoft.com/en-us/powershell/scripting/setup/installing-windows-powershell?view=powershell-6#upgrading-existing-windows-powershell" data-v-837d0d68>https://docs.microsoft.com/en-us/powershell/scripting/setup/installing-windows-powershell?view=powershell-6#upgrading-existing-windows-powershell</a> <a href="/blog/talk-about-scoop-the-package-manager-for-windows-again#fnref4" class="footnote-backref">↩︎</a></p></li> <li id="fn5" class="footnote-item" data-v-837d0d68><p data-v-837d0d68><a rel="noopener noreferrer" target="_blank" href="https://github.com/lukesampson/scoop/issues/2227" data-v-837d0d68>https://github.com/lukesampson/scoop/issues/2227</a> <a href="/blog/talk-about-scoop-the-package-manager-for-windows-again#fnref5" class="footnote-backref">↩︎</a></p></li> <li id="fn6" class="footnote-item" data-v-837d0d68><p data-v-837d0d68><a rel="noopener noreferrer" target="_blank" href="https://github.com/lukesampson/scoop/pull/2165" data-v-837d0d68>https://github.com/lukesampson/scoop/pull/2165</a> <a href="/blog/talk-about-scoop-the-package-manager-for-windows-again#fnref6" class="footnote-backref">↩︎</a></p></li> <li id="fn7" class="footnote-item" data-v-837d0d68><p data-v-837d0d68><a rel="noopener noreferrer" target="_blank" href="https://github.com/lukesampson/scoop/wiki/Buckets" data-v-837d0d68>https://github.com/lukesampson/scoop/wiki/Buckets</a> <a href="/blog/talk-about-scoop-the-package-manager-for-windows-again#fnref7" class="footnote-backref">↩︎</a></p></li> <li id="fn8" class="footnote-item" data-v-837d0d68><p data-v-837d0d68><a rel="noopener noreferrer" target="_blank" href="https://github.com/chocolatey/choco/blob/master/CHANGELOG.md" data-v-837d0d68>https://github.com/chocolatey/choco/blob/master/CHANGELOG.md</a> <a href="/blog/talk-about-scoop-the-package-manager-for-windows-again#fnref8" class="footnote-backref">↩︎</a></p></li> <li id="fn9" class="footnote-item" data-v-837d0d68><p data-v-837d0d68><a rel="noopener noreferrer" target="_blank" href="https://github.com/Homebrew/brew/releases" data-v-837d0d68>https://github.com/Homebrew/brew/releases</a> <a href="/blog/talk-about-scoop-the-package-manager-for-windows-again#fnref9" class="footnote-backref">↩︎</a></p></li> <li id="fn10" class="footnote-item" data-v-837d0d68><p data-v-837d0d68><a rel="noopener noreferrer" target="_blank" href="https://github.com/lukesampson/scoop/graphs/contributors" data-v-837d0d68>https://github.com/lukesampson/scoop/graphs/contributors</a> <a href="/blog/talk-about-scoop-the-package-manager-for-windows-again#fnref10" class="footnote-backref">↩︎</a></p></li> <li id="fn11" class="footnote-item" data-v-837d0d68><p data-v-837d0d68><a rel="noopener noreferrer" target="_blank" href="https://github.com/lukesampson/scoop/blob/master/lib/core.ps1#L1" data-v-837d0d68>https://github.com/lukesampson/scoop/blob/master/lib/core.ps1#L1</a> <a href="/blog/talk-about-scoop-the-package-manager-for-windows-again#fnref11" class="footnote-backref">↩︎</a></p></li> <li id="fn12" class="footnote-item" data-v-837d0d68><p data-v-837d0d68><a rel="noopener noreferrer" target="_blank" href="https://github.com/lukesampson/scoop/issues/2121" data-v-837d0d68>https://github.com/lukesampson/scoop/issues/2121</a> <a href="/blog/talk-about-scoop-the-package-manager-for-windows-again#fnref12" class="footnote-backref">↩︎</a></p></li> <li id="fn13" class="footnote-item" data-v-837d0d68><p data-v-837d0d68><a rel="noopener noreferrer" target="_blank" href="https://github.com/lukesampson/scoop/issues/488" data-v-837d0d68>https://github.com/lukesampson/scoop/issues/488</a> <a href="/blog/talk-about-scoop-the-package-manager-for-windows-again#fnref13" class="footnote-backref">↩︎</a></p></li> <li id="fn14" class="footnote-item" data-v-837d0d68><p data-v-837d0d68><a rel="noopener noreferrer" target="_blank" href="https://github.com/lukesampson/scoop/issues/2220" data-v-837d0d68>https://github.com/lukesampson/scoop/issues/2220</a> <a href="/blog/talk-about-scoop-the-package-manager-for-windows-again#fnref14" class="footnote-backref">↩︎</a></p></li> <li id="fn15" class="footnote-item" data-v-837d0d68><p data-v-837d0d68><a rel="noopener noreferrer" target="_blank" href="https://github.com/lukesampson/scoop/issues/2245" data-v-837d0d68>https://github.com/lukesampson/scoop/issues/2245</a> <a href="/blog/talk-about-scoop-the-package-manager-for-windows-again#fnref15" class="footnote-backref">↩︎</a></p></li></ol></section></Photoswipe></section> <!----> <section class="page-comments" data-v-837d0d68><div id="disqus_thread"></div></section> <footer class="page-footer" data-v-837d0d68></footer></div></article></main> <footer class="tach-footer footer" data-v-7d3552d5 data-v-837d0d68><div class="tach-wrapper" data-v-7d3552d5><div class="container columns" data-v-7d3552d5><section class="section column is-6" data-v-7d3552d5><div class="copyright" data-v-7d3552d5>
          © 2015-2020 Chawye Hsu. Made with <span style="color:#b30e2e" data-v-7d3552d5>❤︎︎</span> in Guangzhou
        </div></section> <section class="section column is-6" data-v-7d3552d5><div class="social-network" data-v-7d3552d5><ul data-v-7d3552d5><li data-v-7d3552d5><a target="_blank" rel="noopener" href="https://github.com/chawyehsu" class="icon" data-v-7d3552d5 data-v-7d3552d5>GitHub</a></li><li data-v-7d3552d5><a target="_blank" rel="noopener" href="https://twitter.com/intent/follow?screen_name=chawyehsu" class="icon" data-v-7d3552d5 data-v-7d3552d5>Twitter</a></li><li data-v-7d3552d5><a target="_blank" rel="noopener" href="https://www.instagram.com/chawyehsu" class="icon" data-v-7d3552d5 data-v-7d3552d5>Instagram</a></li></ul></div></section></div></div></footer></div></div><script src="https://cdn.jsdelivr.net/gh/chawyehsu/chawyehsu.com@gh-pages/_saber/js/styles.5797a3b7.js" defer></script><script src="https://cdn.jsdelivr.net/gh/chawyehsu/chawyehsu.com@gh-pages/_saber/js/page--_posts-2018-05-12-talk-about-scoop-the-package-manager-for-windows-again-md.d6862ec9.js" defer></script><script src="https://cdn.jsdelivr.net/gh/chawyehsu/chawyehsu.com@gh-pages/_saber/js/client.032ab6fd.js" defer></script></body></html>
